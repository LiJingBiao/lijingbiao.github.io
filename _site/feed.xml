<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>LiJingBiao</title>
    <description>欢迎来到我的个人博客~</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 07 Jun 2021 10:50:28 +0800</pubDate>
    <lastBuildDate>Mon, 07 Jun 2021 10:50:28 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>博客本地服务器开启并打开本地博客网页</title>
        <description>&lt;p&gt;在~/.bash_profile中添加如下代码&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;alias rbs='sleep 7 &amp;amp;&amp;amp; open http://127.0.0.1:4000 &amp;amp; cd /Users/syswin/Desktop/MySite &amp;amp;&amp;amp; bundle exec jekyll serve'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 04 Jun 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/06/%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF%E5%B9%B6%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/06/%E5%8D%9A%E5%AE%A2%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF%E5%B9%B6%E6%89%93%E5%BC%80%E6%9C%AC%E5%9C%B0%E5%8D%9A%E5%AE%A2%E7%BD%91%E9%A1%B5/</guid>
        
        <category>shell</category>
        
        
      </item>
    
      <item>
        <title>利用shell读取README.MD配置修改配置环境</title>
        <description>&lt;p&gt;&lt;strong&gt;READM.ME内容&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;|企业证书|key|详情|
---|---|---
企业证书 | `PRODUCT_BUNDLE_IDENTIFIER` | `com.helloworld.enterprise.app`
 | `DEVELOPMENT_TEAM` | `TLWGLP697Z5D`
 | `PROVISIONING_PROFILE_SPECIFIER` | `HaiDianTong_Distribution`
 App Store证书 | `PRODUCT_BUNDLE_IDENTIFIER` | `com.helloworld.app`
  | `DEVELOPMENT_TEAM` | `9D4SRNFSVF43`
  | `PROVISIONING_PROFILE_SPECIFIER` | `app_Distribution`
 Debug证书 | `PRODUCT_BUNDLE_IDENTIFIER` | `com.helloworld.beijingtong`
 | `DEVELOPMENT_TEAM` | `XYD7AF2EXNZZ`
 | `PROVISIONING_PROFILE_SPECIFIER` | `BeiJingRenShe_Development`


|数据环境|key|详情|
---|---|---
线上环境 | `toon_router_domain` | `http://routerhd.hebeizhichuang.com/user/router/basicRouter`
 |`cdtp_dns_router`| `http://www.cdtpdns.com/`
 |`sensorsAnalyticsServerUrl`| `https://da.helloworld.com/sa?project=production`
 |`sensorsAnalyticsConfigUrl`| `https://da.helloworld.com/config/?project=production`
t600环境| `toon_router_domain` | `http://routert600.helloworld.com/user/router/basicRouter`
 |`cdtp_dns_router` | `http://cdtpdnstmail.helloworld.com`
 |`sensorsAnalyticsServerUrl` | `https://da.helloworld.com/sa?project=default`
 |`sensorsAnalyticsConfigUrl` | `https://da.helloworld.com/config/?project=default`
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;切换测试线上环境&quot;&gt;切换测试、线上环境&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;Set_Info_Plist&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
   /usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Set :&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$info_plist&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;ENV_TOON&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'BEGIN{};/toon_router_domain/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }'&lt;/span&gt; ../README.MD|cut &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f3&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ENV_CDTP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'BEGIN{};/cdtp_dns_router/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0); gsub(/\`/,&quot;&quot;,$0);print $0 }'&lt;/span&gt; ../README.MD|cut &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f3&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'BEGIN{};/sensorsAnalyticsServerUrl/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0); gsub(/\`/,&quot;&quot;,$0);print $0 }'&lt;/span&gt; ../README.MD|cut &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f3&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'BEGIN{};/sensorsAnalyticsConfigUrl/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0); gsub(/\`/,&quot;&quot;,$0);print $0 }'&lt;/span&gt; ../README.MD|cut &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f3&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;ENV_TOON&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ENV_TOON&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ENV_CDTP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ENV_CDTP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_SERVER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_CONFIG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${#&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_TOON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[*]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-eq&lt;/span&gt; 2 &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${#&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_CDTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[*]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-eq&lt;/span&gt; 2 &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_TOON_RELEASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_TOON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[0]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;ENV_TOON_DEVELOPMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_TOON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[1]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nv&quot;&gt;ENV_CDTP_RELEASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_CDTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[0]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;ENV_CDTP_DEVELOPMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_CDTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[1]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else 
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;获取失败
    &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi

if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${#&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[*]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-eq&lt;/span&gt; 2 &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${#&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[*]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-eq&lt;/span&gt; 2 &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER_RELEASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[0]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER_DEVELOPMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_SERVER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[1]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG_RELEASE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[0]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG_DEVELOPMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;ENV_SENSOR_CONFIG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[1]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else 
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;获取失败
    &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi
&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------toon_router_domain develop------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_TOON_DEVELOPMENT&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# echo $ENV_TOON_RELEASE1&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------toon_router_domain release------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_TOON_RELEASE&lt;/span&gt;


&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------cdtp_dns_router develop------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_CDTP_DEVELOPMENT&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# echo $ENV_CDTP_RELEASE1&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------cdtp_dns_router release------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_CDTP_RELEASE&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------sensorsAnalyticsServerUrl develop------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_SERVER_DEVELOPMENT&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------sensorsAnalyticsServerUrl release------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_SERVER_RELEASE&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------sensorsAnalyticsConfigUrl develop------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_CONFIG_DEVELOPMENT&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;--------sensorsAnalyticsConfigUrl release------------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_CONFIG_RELEASE&lt;/span&gt;


&lt;span class=&quot;nv&quot;&gt;info_plist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;./TLauncher/Info.plist

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$info_plist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;找不到plist文件&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi


&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;CURRENT_TOON_ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Print toon_router_domain'&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$info_plist&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;------两个环境比较---------&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$CURRENT_TOON_ENV&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_TOON_DEVELOPMENT&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_TOON_DEVELOPMENT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$CURRENT_TOON_ENV&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;toon_router_domain&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_TOON_RELEASE&lt;/span&gt;
    Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;cdtp_dns_router&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_CDTP_RELEASE&lt;/span&gt;
    Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;sensorsAnalyticsServerUrl&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_SERVER_RELEASE&lt;/span&gt;
    Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;sensorsAnalyticsConfigUrl&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_CONFIG_RELEASE&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;由之前测试环境修改为线上环境
 &lt;span class=&quot;k&quot;&gt;else 
    &lt;/span&gt;Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;toon_router_domain&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_TOON_DEVELOPMENT&lt;/span&gt;
    Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;cdtp_dns_router&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_CDTP_DEVELOPMENT&lt;/span&gt;
    Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;sensorsAnalyticsServerUrl&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_SERVER_DEVELOPMENT&lt;/span&gt;
    Set_Info_Plist &lt;span class=&quot;s2&quot;&gt;&quot;sensorsAnalyticsConfigUrl&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ENV_SENSOR_CONFIG_DEVELOPMENT&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo &lt;/span&gt;由之前线上环境修改为测试环境
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;证书切换&quot;&gt;证书切换&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;set -e
set -u
set -o pipefail

README_PATH=&quot;$SRCROOT/../README.MD&quot;
PBXPROJ_PATH=&quot;$PROJECT_FILE_PATH/project.pbxproj&quot;
PRODUCT_BUNDLE_IDENTIFIER=`awk 'BEGIN{};/PRODUCT_BUNDLE_IDENTIFIER/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }' $README_PATH|cut -d\| -f3`
DEVELOPMENT_TEAM=`awk 'BEGIN{};/DEVELOPMENT_TEAM/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }' $README_PATH|cut -d\| -f3`
PROVISIONING_PROFILE_SPECIFIER=`awk 'BEGIN{};/PROVISIONING_PROFILE_SPECIFIER/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }' $README_PATH|cut -d\| -f3`

CONFIG_COUNT=3


echo $PRODUCT_BUNDLE_IDENTIFIER
echo $DEVELOPMENT_TEAM
echo $PROVISIONING_PROFILE_SPECIFIER

PRODUCT_BUNDLE_IDENTIFIER=($PRODUCT_BUNDLE_IDENTIFIER)
DEVELOPMENT_TEAM=($DEVELOPMENT_TEAM)
PROVISIONING_PROFILE_SPECIFIER=($PROVISIONING_PROFILE_SPECIFIER)
if [ ${#PRODUCT_BUNDLE_IDENTIFIER[*]} -eq $CONFIG_COUNT -a ${#DEVELOPMENT_TEAM[*]} -eq $CONFIG_COUNT -a ${#PROVISIONING_PROFILE_SPECIFIER[*]} -eq $CONFIG_COUNT ]; then
    ############################ 内部市场 Bundle ID #############################
    PRODUCT_BUNDLE_IDENTIFIER_ENTERPRISE=${PRODUCT_BUNDLE_IDENTIFIER[0]}
    ############################ App Store Bundle ID #############################
    PRODUCT_BUNDLE_IDENTIFIER_APPSTORE=${PRODUCT_BUNDLE_IDENTIFIER[1]}

    ############################ 内部市场证书#############################
    PROVISIONING_PROFILE_SPECIFIER_ENTERPRISE_Distribution=${PROVISIONING_PROFILE_SPECIFIER[0]}
    ############################ App Store 证书#############################
    PROVISIONING_PROFILE_SPECIFIER_APPSTORE_Distribution=${PROVISIONING_PROFILE_SPECIFIER[1]}

    ############################ 内部市场 TEAM #############################
    DEVELOPMENT_TEAM_ENTERPRISE=${DEVELOPMENT_TEAM[0]}
    ############################ App Store TEAM #############################
    DEVELOPMENT_TEAM_APPSTORE=${DEVELOPMENT_TEAM[1]}

    echo $PRODUCT_BUNDLE_IDENTIFIER_ENTERPRISE $PROVISIONING_PROFILE_SPECIFIER_ENTERPRISE_Distribution $DEVELOPMENT_TEAM_ENTERPRISE
    echo $PRODUCT_BUNDLE_IDENTIFIER_APPSTORE $PROVISIONING_PROFILE_SPECIFIER_APPSTORE_Distribution $DEVELOPMENT_TEAM_APPSTORE

    PRODUCT_BUNDLE_IDENTIFIER_PROJ=`awk 'BEGIN{};/PRODUCT_BUNDLE_IDENTIFIER/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);if($0!~&quot;shellScript&quot;)  print $0 }' $PBXPROJ_PATH`
    echo ----------------
    echo $PBXPROJ_PATH
    echo $PRODUCT_BUNDLE_IDENTIFIER_PROJ
    echo $PROJECT_FILE_PATH
    echo $PBXPROJ_PATH                       
    echo ----------------
    if [[ $PRODUCT_BUNDLE_IDENTIFIER_PROJ =~ $PRODUCT_BUNDLE_IDENTIFIER_ENTERPRISE ]]; then
        echo '由企业证书改为App Store证书'
        sed -i '' -e 's/PROVISIONING_PROFILE_SPECIFIER\ =\ .*/PROVISIONING_PROFILE_SPECIFIER\ =\ '$PROVISIONING_PROFILE_SPECIFIER_APPSTORE_Distribution'\;/' $PBXPROJ_PATH
        sed -i '' -e 's/PRODUCT_BUNDLE_IDENTIFIER\ =\ .*/PRODUCT_BUNDLE_IDENTIFIER\ =\ '$PRODUCT_BUNDLE_IDENTIFIER_APPSTORE'\;/' $PBXPROJ_PATH
        sed -i '' -e 's/DEVELOPMENT_TEAM\ =\ .*/DEVELOPMENT_TEAM\ =\ '$DEVELOPMENT_TEAM_APPSTORE'\;/' $PBXPROJ_PATH
    elif [[ $PRODUCT_BUNDLE_IDENTIFIER_PROJ =~ $PRODUCT_BUNDLE_IDENTIFIER_APPSTORE ]]; then
        echo '由App Store证书改为企业证书'
        sed -i '' -e 's/PROVISIONING_PROFILE_SPECIFIER\ =\ .*/PROVISIONING_PROFILE_SPECIFIER\ =\ '$PROVISIONING_PROFILE_SPECIFIER_ENTERPRISE_Distribution'\;/' $PBXPROJ_PATH
        sed -i '' -e 's/PRODUCT_BUNDLE_IDENTIFIER\ =\ .*/PRODUCT_BUNDLE_IDENTIFIER\ =\ '$PRODUCT_BUNDLE_IDENTIFIER_ENTERPRISE'\;/' $PBXPROJ_PATH
        sed -i '' -e 's/DEVELOPMENT_TEAM\ =\ .*/DEVELOPMENT_TEAM\ =\ '$DEVELOPMENT_TEAM_ENTERPRISE'\;/' $PBXPROJ_PATH
    fi

else 
    echo '修改失败'
    exit -1
fi

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;设置debug证书&quot;&gt;设置debug证书&lt;/h2&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Type a script or drag a script file from your workspace to insert its path.
set -e
set -u
set -o pipefail

README_PATH=&quot;$SRCROOT/../README.MD&quot;
PBXPROJ_PATH=&quot;$PROJECT_FILE_PATH/project.pbxproj&quot;
PRODUCT_BUNDLE_IDENTIFIER=`awk 'BEGIN{};/PRODUCT_BUNDLE_IDENTIFIER/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }' $README_PATH|cut -d\| -f3`
DEVELOPMENT_TEAM=`awk 'BEGIN{};/DEVELOPMENT_TEAM/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }' $README_PATH|cut -d\| -f3`
PROVISIONING_PROFILE_SPECIFIER=`awk 'BEGIN{};/PROVISIONING_PROFILE_SPECIFIER/{ gsub(/[[:blank:]]*/,&quot;&quot;,$0);gsub(/\`/,&quot;&quot;,$0);print $0 }' $README_PATH|cut -d\| -f3`
CONFIG_COUNT=3
echo $PRODUCT_BUNDLE_IDENTIFIER
echo $DEVELOPMENT_TEAM
echo $PROVISIONING_PROFILE_SPECIFIER

PRODUCT_BUNDLE_IDENTIFIER=($PRODUCT_BUNDLE_IDENTIFIER)
DEVELOPMENT_TEAM=($DEVELOPMENT_TEAM)
PROVISIONING_PROFILE_SPECIFIER=($PROVISIONING_PROFILE_SPECIFIER)
if [ ${#PRODUCT_BUNDLE_IDENTIFIER[*]} -eq $CONFIG_COUNT -a ${#DEVELOPMENT_TEAM[*]} -eq $CONFIG_COUNT -a ${#PROVISIONING_PROFILE_SPECIFIER[*]} -eq $CONFIG_COUNT ]; then
    ############################ DEBUG Bundle ID #############################
    PRODUCT_BUNDLE_IDENTIFIER_DEBUG=${PRODUCT_BUNDLE_IDENTIFIER[2]}
    ############################ DEBUG 证书#############################
    PROVISIONING_PROFILE_SPECIFIER_DEBUG=${PROVISIONING_PROFILE_SPECIFIER[2]}
    ############################ DEBGU TEAM #############################
    DEVELOPMENT_TEAM_DEBUG=${DEVELOPMENT_TEAM[2]}

    echo $PRODUCT_BUNDLE_IDENTIFIER_DEBUG $PROVISIONING_PROFILE_SPECIFIER_DEBUG $DEVELOPMENT_TEAM_DEBUG

    sed -i '' -e 's/PROVISIONING_PROFILE_SPECIFIER\ =\ .*/PROVISIONING_PROFILE_SPECIFIER\ =\ '$PROVISIONING_PROFILE_SPECIFIER_DEBUG'\;/' $PBXPROJ_PATH
    sed -i '' -e 's/PRODUCT_BUNDLE_IDENTIFIER\ =\ .*/PRODUCT_BUNDLE_IDENTIFIER\ =\ '$PRODUCT_BUNDLE_IDENTIFIER_DEBUG'\;/' $PBXPROJ_PATH
    sed -i '' -e 's/DEVELOPMENT_TEAM\ =\ .*/DEVELOPMENT_TEAM\ =\ '$DEVELOPMENT_TEAM_DEBUG'\;/' $PBXPROJ_PATH

else 
    echo '修改失败'
    exit -1
fi

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 04 Jun 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/06/%E5%88%A9%E7%94%A8shell%E8%AF%BB%E5%8F%96README.MD%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/06/%E5%88%A9%E7%94%A8shell%E8%AF%BB%E5%8F%96README.MD%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83/</guid>
        
        <category>shell</category>
        
        
      </item>
    
      <item>
        <title>rebase使用</title>
        <description>&lt;h1 id=&quot;1当前分支为feature基于master合并&quot;&gt;1、当前分支为feature，基于master合并&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git rebase -i master 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;2出现冲突&quot;&gt;2、出现冲突&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;1、解决冲突&lt;/li&gt;
  &lt;li&gt;2、&lt;code class=&quot;highlighter-rouge&quot;&gt;git add .&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;3、&lt;code class=&quot;highlighter-rouge&quot;&gt;git rebase --continue&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;3出现冲突&quot;&gt;3、出现冲突&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git rebase --abort
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;4合并提交信息&quot;&gt;4、合并提交信息&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git rebase -i &amp;lt;first commit id&amp;gt; &amp;lt;last commit id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 04 Jun 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/06/rebase%E4%BD%BF%E7%94%A8/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/06/rebase%E4%BD%BF%E7%94%A8/</guid>
        
        <category>git</category>
        
        
      </item>
    
      <item>
        <title>Shell脚本中判断字符串是否被包含在内</title>
        <description>&lt;h1 id=&quot;shell脚本中判断字符串是否被包含在内&quot;&gt;Shell脚本中判断字符串是否被包含在内&lt;/h1&gt;

&lt;h1 id=&quot;1字段-grep&quot;&gt;1、字段 grep：&lt;/h1&gt;
&lt;p&gt;案例：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;str1=&quot;abcdefgh&quot;
str2=&quot;def&quot;
result=$(echo $str1 | grep &quot;${str2}&quot;)
if [[ &quot;$result&quot; != &quot;&quot; ]];then
    echo &quot;包含&quot;
else
    echo &quot;不包含&quot;
fi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;2-字符串运算符-&quot;&gt;2、 字符串运算符 =~:&lt;/h1&gt;
&lt;p&gt;案例：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;str1=&quot;abcdefgh&quot;
str2=&quot;def&quot;
if [[ $str1 =~ $str2 ]];then
    echo &quot;包含&quot;
else
    echo &quot;不包含&quot;
fi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;3-正则表达式中的通配符-&quot;&gt;3、 正则表达式中的通配符 *:&lt;/h1&gt;
&lt;p&gt;案例：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;str1=&quot;abcdefgh&quot;
str2=&quot;def&quot;
if [[ $str1 == *$str2* ]];then
    echo &quot;包含&quot;
else
    echo &quot;不包含&quot;
fi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 02 Jun 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/06/Shell%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E8%A2%AB%E5%8C%85%E5%90%AB%E5%9C%A8%E5%86%85/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/06/Shell%E8%84%9A%E6%9C%AC%E4%B8%AD%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E8%A2%AB%E5%8C%85%E5%90%AB%E5%9C%A8%E5%86%85/</guid>
        
        <category>Shell</category>
        
        
      </item>
    
      <item>
        <title>Mac 上简单使用 Sed</title>
        <description>&lt;h1 id=&quot;mac-上简单使用-sed&quot;&gt;Mac 上简单使用 Sed&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;有时我们需要通过脚本简单修改某个文件中的某个值时，可以用到 Sed 命令的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;一安装&quot;&gt;一、安装&lt;/h2&gt;

&lt;p&gt;如果已安装请忽略，没有安装需要 install 下&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install gnu-sed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;二简单使用&quot;&gt;二、简单使用&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;注意： Linux Mac 下使用是略有不同的，此处以 Mac 使用的。&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;举例子，直接替换&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat test.txt
12345
aaa
CCC
$ sed -i &quot;&quot; &quot;s/12345/Hello/&quot; test.txt
$ cat test.txt
Hello
aaa
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;分析命令 &lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;s/12345/Hello/&quot; test.txt&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;-i&lt;/code&gt; 直接操作文件并不需要备份文件，如果需要备分则使用 -i “benfen”&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;s&lt;/code&gt; 代表 &lt;code class=&quot;highlighter-rouge&quot;&gt;substitue&lt;/code&gt; 即替换&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;12345&lt;/code&gt; 要被代替的文字&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Hello&lt;/code&gt; 要代替的文字&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;test.txt&lt;/code&gt; 对应修改的文件&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;sed 全名为 stream editor，流编辑器，用程序的方式来编辑文本，功能相当的强大，此处简单记录下&lt;/p&gt;

&lt;h3 id=&quot;修改文件要用-i-另外基本操作码如下以及熟悉简单的正则表达式就ok&quot;&gt;修改文件要用-i， 另外基本操作码如下，以及熟悉简单的正则表达式就OK&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;s 替换
c change line
d 删除line
i 插入line
a 追加line
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2-1删-d&quot;&gt;2-1、删 d&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ `sed -i &quot;&quot; &quot;2d&quot; test.txt` 删除
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;删除第二行&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;2d&quot; test.txt&lt;/code&gt; 2 代表第二行&lt;/li&gt;
  &lt;li&gt;删除以什么开头的某行&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;/^C.*/d&quot; test.txt&lt;/code&gt; /C.* 代表 以C 开头的行数，.* 是通配符&lt;/li&gt;
  &lt;li&gt;删除包含什么的行&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;/2/d&quot; test.txt&lt;/code&gt; 2 代表包含 2 的行&lt;/li&gt;
  &lt;li&gt;删除空行&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;/^$/d&quot; test.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2-2增-a-i&quot;&gt;2-2、增 a i&lt;/h3&gt;

&lt;p&gt;在 Mac 系统是原生于bsd系, 所以此处添加 和 插入有点奇怪的（a 添加下一行，i 插入上一行）&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed &quot;$line a\ (注意此处有空格,要在下一行添加文本)
$value(如果想换行要把&quot;写到下一行)
&quot; $file
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed -i &quot;&quot; &quot;2 a\   
aaa
&quot; test.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sed -i &quot;&quot; &quot;2 i\   
xxx
&quot; test.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其他规则如删除差不多，就是要注意 \ 要换行的，好麻烦&lt;/p&gt;

&lt;h3 id=&quot;2-3查-p&quot;&gt;2-3、查 p&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -n &quot;p&quot; test.txt // 输出
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;输出所有&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -n 'p' test.txt&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;输出第二行&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -n '2p' test.txt&lt;/code&gt; 2 代表所有&lt;/li&gt;
  &lt;li&gt;输出前缀为 1 的行&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -n '/^1.*/p' test.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2-4改-s&quot;&gt;2-4、改 s&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sed -i &quot;&quot; &quot;s/pattern/replace/&quot; test.txt 
$ sed -i &quot;&quot; &quot;n,ms/pattern/replace/g&quot; test.txt //指定行
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;修改某个字符串&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;s/Hello/xxxx/&quot; test.txt&lt;/code&gt; Hello 表示要修改的文字，xxx 表示替代的&lt;/li&gt;
  &lt;li&gt;修改某行的指定&lt;br /&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;sed -i &quot;&quot; &quot;4s/xxxx/aaa/&quot; test.txt&lt;/code&gt; 4 代表第四行&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;以上我们修改一些简单的文件，暂时是没问题啦的，再配合正则表达式 多尝试下，基本OK&lt;br /&gt;
只是要注意下 Mac 和 Linux Sed 命令规则很不同的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;参考： &lt;a href=&quot;https://links.jianshu.com/go?to=https%3A%2F%2Fahuigo.github.io%2Fb%2Fc%2Fops-sed%23%2F&quot;&gt;SED 简记&lt;/a&gt;, &lt;a href=&quot;https://links.jianshu.com/go?to=https%3A%2F%2Fwww.cnblogs.com%2Fliwei0526vip%2Fp%2F5644163.html&quot;&gt;sed入门详解教程&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Wed, 02 Jun 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/06/Mac%E4%B8%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8Sed/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/06/Mac%E4%B8%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8Sed/</guid>
        
        <category>shell</category>
        
        
      </item>
    
      <item>
        <title>iOS国际化查找中文替换</title>
        <description>&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# coding=utf-8

import os
import re

import sys
reload(sys)
sys.setdefaultencoding('utf-8')

DESPATH = os.getcwd()

AllText = []

WDESPATH = os.getcwd()+&quot;/unlocalized.strings&quot;

BLACKDIRLIST = [
    DESPATH + '/Frameworks',
    DESPATH + '/Example',
    '_Pods.xcodeproj',
    'README.md',
    'LICENSE',
    '*.podspec'
    'ci.rb',
]

SEPREATE = ' &amp;lt;=&amp;gt; '

def isInBlackList(filePath):
    if os.path.isfile(filePath):
        return fileNameAtPath(filePath) in BLACKDIRLIST
    if filePath:
        return filePath in BLACKDIRLIST
    return False

def fileNameAtPath(filePath):
    return os.path.split(filePath)[1]

def isSignalNote(str):
    if '//' in str:
        return True
    if str.startswith('#pragma'):
        return True
    return False

def isLogMsg(str):
    if str.startswith('NSLog') or str.startswith('FLOG') or str.startswith('TLOG_INFO') or str.startswith('TLOG') or str.startswith('TLOG_WARNING') or str.startswith('TLOG_DEBUG'):
        return True
    return False

def unlocalizedStrs(filePath):
    f = open(filePath)
    fileName = fileNameAtPath(filePath)
    isMutliNote = False
    isImportHeader = False
    isHaveWriteFileName = False
    file_data = []
    importHeaderLineNum = 0
    isNeedImport = False
    for index, line in enumerate(f):
        if 'TeIntenational' in line: isImportHeader = True
        if '#import' in line: importHeaderLineNum = index
        newLine = line
        line = line.strip()
        if '/*' in line:
            isMutliNote = True
        if '*/' in line:
            isMutliNote = False
        if isMutliNote:
            file_data.append(newLine)
            continue

        if isSignalNote(line):
            file_data.append(newLine)
            continue

        if isLogMsg(line):
            file_data.append(newLine)
            continue
        tmpLine = re.sub(u'(?&amp;lt;!TStringWithKeyFromTable\()(@&quot;[^&quot;%]*[\u4E00-\u9FA5]+[^&quot;%\n]*?&quot;)', 'TStringWithKeyFromTable(\\1, @&quot;TJTranslateApp&quot;)', newLine.decode('utf-8'))
        if tmpLine != newLine and not 'NSAssert' in tmpLine:
            print tmpLine
            newLine = tmpLine
            isNeedImport = True
        file_data.append(newLine)
        matchList = re.findall(u'@&quot;[^&quot;%]*[\u4E00-\u9FA5]+[^&quot;%\n]*?&quot;', line.decode('utf-8'))
        if matchList:
            if not isHaveWriteFileName:
                wf.write('\n//' + fileName + '\n')
                isHaveWriteFileName = True
   
            for item in matchList:
                if not item in AllText and not 'NSAssert' in item:
                    wf.write('\&quot;' + item[2 : len(item)] + ' = \&quot;' + item[2 : len(item)] + ';\n')
                    AllText.append(item)
    if not isImportHeader and isNeedImport:
        file_data.insert(importHeaderLineNum+1, '#import &amp;lt;TJString/TJIntenational.h&amp;gt;\n')
        with open(filePath,&quot;w&quot;) as f:
            f.write(''.join(file_data))
    elif isImportHeader:
        with open(filePath,&quot;w&quot;) as f:
            f.write(''.join(file_data))
        
def findFromFile(path):
    paths = os.listdir(path)
    for aCompent in paths:
        aPath = os.path.join(path, aCompent)
        if isInBlackList(aPath):
            print('在黑名单中，被自动忽略' + aPath)
            continue
        if os.path.isdir(aPath):
            findFromFile(aPath)
        elif os.path.isfile(aPath) and os.path.splitext(aPath)[1]=='.m':
            unlocalizedStrs(aPath)

if __name__ == '__main__':
    wf = open(WDESPATH, 'w')
    findFromFile(DESPATH)
    wf.close()
    print &quot;执行完毕，共检索到&quot; + str(len(AllText)) + &quot;条&quot;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 31 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/iOS%E5%9B%BD%E9%99%85%E5%8C%96%E6%9F%A5%E6%89%BE%E4%B8%AD%E6%96%87%E6%9B%BF%E6%8D%A2/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/iOS%E5%9B%BD%E9%99%85%E5%8C%96%E6%9F%A5%E6%89%BE%E4%B8%AD%E6%96%87%E6%9B%BF%E6%8D%A2/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>iOS重签名脚本</title>
        <description>&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#说明：需要修改的参数&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 1. APP_NAME，如：APP_NAME=MiHome.app&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 2. KEYCHAIN_ID，即证书对应的SHA256, 如 KEYCHAIN_ID=&quot;B69D7658D231BD17F335B67E07BA333685C1F290&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 3. BUNDLE_IDENTIFIER，授权文件对应的BundleID，如BUNDLE_IDENTIFIER=&quot;com.dahuatech.lecheng&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 4. 授权文件，修改为embeded.mobileprovision后放入目录中，如PROVISION_IOS=&quot;${TEMP}/embeded.mobileprovision&quot;&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;############################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#通用函数定义&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#打印命令&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;echoCommand&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#打印xcode、编译环境信息&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;printXcodeInfo&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    xcode-select &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
    xcode-select &lt;span class=&quot;nt&quot;&gt;--print-path&lt;/span&gt;
    security find-identity &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; codesigning
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 打印电脑中安装的授权文件&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;printProvisionFiles&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; ~/Library/MobileDevice/Provisioning&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Profiles/
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Generate entitlements&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 通过Profile文件生成签名用的entitlements.plist文件&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数1：Profile文件，保存至ENTITLEMENTS_PLIST中&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#返回值：plist文件路径&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;generateEntitlementPlistFile&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Error: No profiles input...&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi

    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;provisionvalue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;parseEntitlement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;provisionvalue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;#*&amp;lt;key&amp;gt;Entitlements&amp;lt;/key&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;parseEntitlement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%%&amp;lt;/dict&amp;gt;*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;lt;string&amp;gt;\*&amp;lt;\/string&amp;gt;/&amp;lt;array&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:funcshop.imoulife.com&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:dvl.lechange.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:dx.lechange.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:func.lechange.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:u5c.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;/array&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementHeader1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;'&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementHeader2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;'&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementHeader3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&amp;lt;plist version=&quot;1.0&quot;&amp;gt;'&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;fullEntitlement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$entitlementHeader1$entitlementHeader2$entitlementHeader3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;lt;/dict&amp;gt;&amp;lt;/plist&amp;gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;fullEntitlement&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/entitlements.plist&quot;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#echo &quot;------------ Entitlements file used --------------&quot;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#echo &quot;${fullEntitlement}&quot;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#echo &quot;--------------------------------------------------&quot;&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/entitlements.plist&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#对可执行文件进行签名&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数1：授权文件路径&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数2：证书KeychainId&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数3：可执行文件路径&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;resignFile&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Resign File: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementsPlist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;generateEntitlementPlistFile &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#去除旧的签名&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Remove _CodeSignature...&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/_CodeSignature&quot;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#拷贝描述文件&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Copy provisioning file to ... &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/embedded.mobileprovision&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/embedded.mobileprovision&quot;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#目录下有Frameworks文件夹，则需要对所有动态库进行重签名&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Frameworks&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
        &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;codesign &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;/Frameworks/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#对可执行文件进行签名&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;codesign &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--entitlements&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;entitlementsPlist&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;############################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# main loop&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** *. List Xcode &amp;amp; codesign info... ********************]&quot;&lt;/span&gt;
printXcodeInfo

&lt;span class=&quot;c&quot;&gt;#echo &quot;[******************** *. List Provisionfiles ... ********************]&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#printProvisionFiles&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** 0. Check build path ... ********************]&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#文件夹路径&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#将xx.app拷贝到Payload目录下，自动读取App名称&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#APP_NAME=$(ls &quot;$TEMP/Payload&quot;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#将xxx.app拷贝到Resign目录下&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;MiHome.app
&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%.*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Check Path TEMP:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;AppName: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#临时处理，只是保证每次动态注入的二进制是原始的&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./Payload/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; MiHome.app ./Payload/

&lt;span class=&quot;c&quot;&gt;#检测二进制文件是否脱壳&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[*** Check crypt: otool -l Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; | grep crypt... ***] &quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;APP_CRYPT_INFO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;otool &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; Payload/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;crypt&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$APP_CRYPT_INFO&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$APP_CRYPT_INFO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;~ &lt;span class=&quot;s2&quot;&gt;&quot;cryptid 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** Fatal error, binary is encrypted... ********************]&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[*** Check crypt succeed... ***] &quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi


&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** 1. Set resign parameters ... ********************]&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#证书签名变量【p12文件修改后需要更新】&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;B69D7658D231BD17F335B67E07BA333685C1F290&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;BUNDLE_IDENTIFIER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;com.dahuatech.lecheng&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/embeded.mobileprovision&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#libCommonCrack.dylib，注入的动态库，不能加上路径，否则App在启动时执行路径会变成 dylib path @executable_path//Users/&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;LIB_COMMON_CRACK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;libCommonCrack.dylib&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;LIB_REVEAL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;libReveal.dylib&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#DISPLAY_NAME=&quot;&quot;    #eg.xxx&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** 2. Resigning for &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; ... ********************]&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#为方便签名，去除watch和插件文件夹&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;/Payload/&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;/Watch
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;/Payload/&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;/PlugIns

&lt;span class=&quot;c&quot;&gt;#修改BundleID&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$BUNDLE_IDENTIFIER&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;change bundle ID: &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUNDLE_IDENTIFIER&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Set :CFBundleIdentifier &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUNDLE_IDENTIFIER&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#修改App名称&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$DISPLAY_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;change display name: &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DISPLAY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Set :CFBundleDisplayName &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DISPLAY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#删除UISupportedDevices&lt;/span&gt;
&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Delete :UISupportedDevices&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#设置为可以通过iTunes进行共享&lt;/span&gt;
&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Delete :UIFileSharingEnabled&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Add :UIFileSharingEnabled bool 1&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#注入动态库&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;yololib dynamic framework/lib: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
./yololib &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt;
./yololib &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$LIB_REVEAL&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#copy 动态库：将需要加载的动态库，拷贝到App主目录下&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;copy dynamic framework/lib&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./&lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./&lt;span class=&quot;nv&quot;&gt;$LIB_REVEAL&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Resign file&lt;/span&gt;
resignFile &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
resignFile &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LIB_REVEAL&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
resignFile &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;===============================================&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Resign result&quot;&lt;/span&gt;
codesign &lt;span class=&quot;nt&quot;&gt;-dvvv&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;/Payload/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#清理临时文件&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; entitlements.plist

&lt;span class=&quot;c&quot;&gt;# Zip file generate new ipa file&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;zip file generate new ipa file&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; resign.ipa
echoCommand &lt;span class=&quot;s2&quot;&gt;&quot;zip -qr resign.ipa Payload &quot;&lt;/span&gt;


&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** End resigning ... ********************]&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 27 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/iOS%E9%87%8D%E7%AD%BE%E5%90%8D%E8%84%9A%E6%9C%AC/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/iOS%E9%87%8D%E7%AD%BE%E5%90%8D%E8%84%9A%E6%9C%AC/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>git回滚</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://www.zybuluo.com/qidiandasheng/note/889366&quot;&gt;转自git的使用&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;取消修改恢复版本&quot;&gt;取消修改，恢复版本&lt;/h1&gt;
&lt;h2 id=&quot;取消对单个文件的修改&quot;&gt;取消对单个文件的修改&lt;/h2&gt;
&lt;p&gt;这里指未commit的文件&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout -- &amp;lt;file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;取消所有未提交的修改&quot;&gt;取消所有未提交的修改&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clean -xdf   
or
git checkout .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;撤销git-commit未push&quot;&gt;撤销git commit(未push)&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;找到上次git commit的 id
git log
找到你想撤销的commit_id
比如下面就是我git log输出的最近两次commit，test是已经push到远程仓库的，test1是最新commit但没push的。如果我们想撤销test1这次的提交，则我需要的就是test这次的commit_id。
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:07:04 2017 +0800
  test1
commit 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 22:57:47 2017 +0800
  test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;git reset –hard commit_id
完成撤销,同时将代码恢复到commit_id 对应的版本。
如上一个例子中就是:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reset --hard 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17  
git reset commit_id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改。
如上一个例子中就是:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reset 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;h2 id=&quot;暂存到stash&quot;&gt;暂存到stash&lt;/h2&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git stash
//恢复
git stash pop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;h2 id=&quot;回滚&quot;&gt;回滚&lt;/h2&gt;
    &lt;p&gt;Revert 撤销一个提交的同时会创建一个新的提交。这是一个安全的方法，因为它不会重写提交历史。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;比如下面的这个例子的提交，如果我们不想要test1的这次提交了，上面我说过用&lt;code class=&quot;highlighter-rouge&quot;&gt;git reset --hard test_commit_id&lt;/code&gt;，但这是在&lt;code class=&quot;highlighter-rouge&quot;&gt;test1&lt;/code&gt;这次提交未push的情况下。
如果&lt;code class=&quot;highlighter-rouge&quot;&gt;test1&lt;/code&gt;这次提交已经push的话就应该使用&lt;code class=&quot;highlighter-rouge&quot;&gt;git revert test1_commit_id&lt;/code&gt;，这样的话代码就会把test1这次的代码修改进行撤销并重新生成一次commit，这样的话&lt;code class=&quot;highlighter-rouge&quot;&gt;test1&lt;/code&gt;的这次&lt;code class=&quot;highlighter-rouge&quot;&gt;commit&lt;/code&gt;还是存在于工作树上的，保持了工作树的干净。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:07:04 2017 +0800
    test1
commit 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 22:57:47 2017 +0800
    test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git revert a5febeebf141dbd9a022dfe96a46cad9d474a5ad&lt;/code&gt;
回滚之后git log如下面所示：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;commit b80d6e00853f386159aa4a17ab40d9d375ad71d0
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:37:00 2017 +0800
    Revert &quot;test1&quot;
    This reverts commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad.
commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:07:04 2017 +0800
    test1
commit 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 22:57:47 2017 +0800
    test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;回滚中间很大一部分commit其中有merge-commit&quot;&gt;回滚中间很大一部分commit，其中有merge commit&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.v2ex.com/t/296286&quot;&gt;回滚&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;git reset –hard 4
git reset –soft 8
git commit -m ‘Reverted 5 6 7 8’&lt;/p&gt;

&lt;p&gt;其实楼主怕的是丢失提交记录，而不是使用 reset rebase 命令&lt;/p&gt;

&lt;h2 id=&quot;查看当前分支是基于哪个分支创建的&quot;&gt;查看当前分支是基于哪个分支创建的&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reflog show &amp;lt;branchName&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;检查本地的代码修改情况&quot;&gt;检查本地的代码修改情况&lt;/h2&gt;

&lt;p&gt;git diff 可以查看当前没有add 的内容修改（不在缓冲区的文件变化）&lt;/p&gt;

&lt;p&gt;git diff –cached查看已经add但没有commit 的改动（在缓冲区的文件变化）&lt;/p&gt;

&lt;p&gt;git diff HEAD 是上面两条命令的合并&lt;/p&gt;

&lt;h2 id=&quot;查看未git-push到远程代码库的git-commit&quot;&gt;查看未git push到远程代码库的git commit&lt;/h2&gt;

&lt;p&gt;git status 只能查看未传送提交的次数&lt;/p&gt;

&lt;p&gt;git cherry -v 只能查看未传送提交的描述/说明&lt;/p&gt;

&lt;p&gt;git log master ^origin/master 则可以查看未传送提交的详细信息&lt;/p&gt;

&lt;h2 id=&quot;输入用户名和密码&quot;&gt;输入用户名和密码&lt;/h2&gt;

&lt;p&gt;https协议push的时候需要输入用户名和密码问题:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config --global credential.helper store
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后你会在你本地生成一个文本，上边记录你的账号和密码。&lt;/p&gt;

&lt;h2 id=&quot;pull-或者-push-一个大项目时报错&quot;&gt;pull 或者 push 一个大项目时报错&lt;/h2&gt;

&lt;p&gt;errno 56，那么应该是有大文件或者提交缓存方面的问题。而 errno 54 则不是这个问题。对于 56 错误的解决方式与网络上大部分文章的一致。都是增大缓存配置，比如下面就是配置提交缓存为 500M。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config http.postBuffer 524288000
git config https.postBuffer 524288000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Thu, 27 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/git%E5%9B%9E%E6%BB%9A/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/git%E5%9B%9E%E6%BB%9A/</guid>
        
        <category>git</category>
        
        
      </item>
    
      <item>
        <title>2021-05-27 Vim使用教程</title>
        <description>&lt;h1 id=&quot;2021-05-27-vim使用教程&quot;&gt;2021-05-27 Vim使用教程&lt;/h1&gt;

&lt;h2 id=&quot;vim&quot;&gt;Vim&lt;/h2&gt;

&lt;p&gt;最近学习所以记录下&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/vi/1429599-b7c061ff85281d7a.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/images/posts/vi/vim-cheat-sheet-en.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/images/posts/vi/preview.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/images/posts/vi/vim_cheat_sheet_for_programmers_screen.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;vivim-的使用&quot;&gt;vi/vim 的使用&lt;/h3&gt;

&lt;p&gt;基本上 vi/vim 共分为三种模式，分别是&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;命令模式（Command mode）&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;输入模式（Insert mode）&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;底线命令模式（Last line mode）&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这三种模式的作用分别是：&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;命令模式&quot;&gt;命令模式：&lt;/h3&gt;

&lt;p&gt;用户刚刚启动 vi/vim，便进入了命令模式。&lt;/p&gt;

&lt;p&gt;此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。&lt;/p&gt;

&lt;p&gt;以下是常用的几个命令：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;i 切换到输入模式，以输入字符。
x 删除当前光标所在处的字符。
: 切换到底线命令模式，以在最底一行输入命令。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。&lt;/p&gt;

&lt;p&gt;命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;输入模式&quot;&gt;输入模式&lt;/h3&gt;

&lt;p&gt;在命令模式下按下i就进入了输入模式。&lt;/p&gt;

&lt;p&gt;在输入模式中，可以使用以下按键：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;字符按键以及Shift组合，输入字符
ENTER，回车键，换行
BACK SPACE，退格键，删除光标前一个字符
DEL，删除键，删除光标后一个字符
方向键，在文本中移动光标
HOME/END，移动光标到行首/行尾
Page Up/Page Down，上/下翻页
Insert，切换光标为输入/替换模式，光标将变成竖线/下划线
ESC，退出输入模式，切换到命令模式
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;底线命令模式&quot;&gt;底线命令模式&lt;/h3&gt;

&lt;p&gt;在命令模式下按下:（英文冒号）就进入了底线命令模式。&lt;/p&gt;

&lt;p&gt;底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。&lt;/p&gt;

&lt;p&gt;在底线命令模式中，基本的命令有（已经省略了冒号）：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;q 退出程序
w 保存文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;按ESC键可随时退出底线命令模式。&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;一打开文件保存关闭文件vi命令模式下使用&quot;&gt;一、打开文件、保存、关闭文件(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi filename //打开filename文件
:w //保存文件
:w vpser.net //保存至vpser.net文件
:q //退出编辑器，如果文件已修改请使用下面的命令
:q! //退出编辑器，且不保存
:wq //退出编辑器，且保存文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;二插入文本或行vi命令模式下使用执行下面命令后将进入插入模式按esc键可退出插入模式&quot;&gt;二、插入文本或行(vi命令模式下使用，执行下面命令后将进入插入模式，按ESC键可退出插入模式)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;i   &quot; 在光标前进入 insert 模式
I   &quot; 在当前行左边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-a&amp;gt; 快捷键
a   &quot; 在光标后进入 insert 模式
A   &quot; 在当前行右边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-e&amp;gt; 快捷键
o   &quot; 在光标的下一行插入
O   &quot; 在光标的上一行插入
s   &quot; 删除当前字符，并进入 insert 模式&quot;
S   &quot; 删除当前行，并进入插入模式
cc  &quot; 删除当前行，并进入插入模式
R //替换(覆盖)当前光标位置及后面的若干文本
J //合并光标所在行及下一行为一行(依然在命令模式)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;三键位操作&quot;&gt;三、键位操作&lt;/h4&gt;

&lt;h5 id=&quot;1移动光标vi命令模式下使用&quot;&gt;1)移动光标(vi命令模式下使用)&lt;/h5&gt;

&lt;p&gt;1、使用上下左右方向键&lt;/p&gt;

&lt;p&gt;2、命令模式下：h 向左、j 向下 、k 向上、l 向右。&lt;br /&gt;
空格键 向右、Backspace 向左、Enter 移动到下一行首、- 移动到上一行首。&lt;/p&gt;

&lt;p&gt;3、借助数字键可以更快的做到光标跳转，5l 表示向右移动 5 个字符，5j 表示向下移动 5 行，其他依次类推&lt;/p&gt;

&lt;h5 id=&quot;2翻页&quot;&gt;2)翻页&lt;/h5&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;ctrl&amp;gt; + f &lt;/code&gt;的组合键可以向下翻一页，这类的组合键以后我会用&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;c-f&amp;gt;&lt;/code&gt;形式表示。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;c-f&amp;gt;   //向下移动一页
&amp;lt;c-d&amp;gt;   //向下移动半页
&amp;lt;c-b&amp;gt;   //向上移动一页
&amp;lt;c-u&amp;gt;   //向上移动半页
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;3行首行尾&quot;&gt;3)行首行尾&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0   &quot; 快速跳到行首
$   &quot; 快速跳到行尾
g_  &quot; 快速跳到行尾最后一个非空字符（后面讨论它跟 $ 的区别）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;跳到指定行
方法1：
输入:n，代表跳转到第n行，如:79，就跳转到第79行。
方法2：
输入nG，代表跳转到第n行，如79G，就跳转到第79行。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;4页头页尾&quot;&gt;4)页头页尾&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gg  &quot; 快速跳到第一行
G   &quot; 快速跳到最后一行
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;四删除恢复字符或行vi命令模式下使用&quot;&gt;四、删除、恢复字符或行(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;x //删除当前字符
nx //删除从光标开始的n个字符
dd //删除当前行
ndd //向下删除当前行在内的n行
u //撤销上一步操作
U //撤销对当前行的所有操作
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;五搜索vi命令模式下使用&quot;&gt;五、搜索(vi命令模式下使用)&lt;/h4&gt;

&lt;h5 id=&quot;1行内查找&quot;&gt;1)行内查找&lt;/h5&gt;

&lt;p&gt;在目标行内按下功能键 f，此时界面无变化，但是右下角会出现字母 f 表示等待下一步操作，然后按下 n，光标便会移动到 native 的首字母上&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fx      &quot; 从当前光标开始向右查找字符 x，x 为目标字符
nfx     &quot; 从当前广告开始向右查找第 n 个字符 x，n 为数字
Fx      &quot; 从当前光标开始向左查找字符 x，x 为目标字符
nfx     &quot; 从当前广告开始向左查找第 n 个字符 x，n 为数字
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;同样的，在这里我建议大家开始只使用向右查找即可，这样也比较符合我们由左到右的阅读习惯，顶多每次先按一下 0 跳到行首就可以了。&lt;/p&gt;

&lt;h5 id=&quot;2全文查找&quot;&gt;2)全文查找&lt;/h5&gt;

&lt;p&gt;如果你想要把全文的 native 都找到，可以按下 / 进入 command 模式，随后输入 native 然后回车，此时光标会定位在第一个目标上，并高亮所有找到的目标单词。&lt;/p&gt;

&lt;p&gt;此时按下 n 光标就会向下在高亮的单词上依次跳转，N 则会反方向跳转。值得注意的地方时，Native 也会被找到，说明默认情况下查找对小写是不敏感的，在以后的章节我们会来讨论怎么处理，但是它对大写是敏感的，你可以用 Native 查找试试。&lt;/p&gt;

&lt;p&gt;最后一点，现在所有的目标区域都是高亮的，怎么取消呢？输入 :nohls 即可，为什么，我们以后再讲。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/word   &quot; 输入 / 会进入 command 模式，再输入先要搜索的单词并回车进行搜索
?word   &quot; / 是向光标以后搜索，? 是向前搜索
n       &quot; 英文字母 n，根据 / 或 ? 搜索的方向定位到下一个匹配目标
N       &quot; 与 n 相反，定位匹配目标
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;3替换&quot;&gt;3)替换&lt;/h5&gt;

&lt;p&gt;替换一般都是和查找绑定在一起的操作，Vim 中提供了两种替换方式&lt;/p&gt;

&lt;p&gt;将 4 到 10 行内的 code 替换为 name&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:4,10s/code/name/g
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;4全文替换&quot;&gt;4)全文替换&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:1,$s/code/name/g
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;不难理解，其实全文替换你也可以理解为替换 1 行到 $ 最后一行，唯一需要注意的是，第二个数字后面要记得跟上 s&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:n1,n2s/word1/word2/g   &quot; n1, n2 表示数字，替换 n1 行到 n2 行的单词
:1,$s/word1/word2/g     &quot; 全文替换，也可以写成 :%s/word1/word2/g
:1,$s/word1/word2/gc    &quot; 全文替换，并出现确认提示
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;替换光标所在的行&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:s/word1/word2/g        &quot; 替换光标当前所在行的内容，不需要输入行号
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/vpser //向光标下搜索vpser字符串
?vpser //向光标上搜索vpser字符串
n //向下搜索前一个搜素动作
N //向上搜索前一个搜索动作
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;六跳至指定行vi命令模式下使用&quot;&gt;六、跳至指定行(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;n+ //向下跳n行
n- //向上跳n行
nG //跳到行号为n的行
G //跳至文件的底部
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;七设置行号vi命令模式下使用&quot;&gt;七、设置行号(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:set nu //显示行号
:set nonu //取消显示行号
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;八复制粘贴vi命令模式下使用&quot;&gt;八、复制、粘贴(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yy //将当前行复制到缓存区，也可以用 &quot;ayy 复制，&quot;a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
nyy //将当前行向下n行复制到缓冲区，也可以用 &quot;anyy 复制，&quot;a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
yw //复制从光标开始到词尾的字符。
nyw //复制从光标开始的n个单词。
y^ //复制从光标到行首的内容。 VPS侦探
y$ //复制从光标到行尾的内容。
p //粘贴剪切板里的内容在光标后，如果使用了前面的自定义缓冲区，建议使用&quot;ap 进行粘贴。
P //粘贴剪切板里的内容在光标前，如果使用了前面的自定义缓冲区，建议使用&quot;aP 进行粘贴。
dd          &quot; 删除当前行
ndd         &quot; 向下删除 n 行
d1G / dgg   &quot; 删除第一行到当前行的数据
dG          &quot; 删除当前行到最后一行的数据
d$          &quot; 删除当前字符到行尾
d0          &quot; 从行首删除到当前字符
yy          &quot; 复制当前行
nyy         &quot; 从当前行开始复制 n 行
y1G / ygg   &quot; 从第一行复制到当前行
yG          &quot; 从当前行复制到最后一行
y0          &quot; 从行首复制到当前字符
y$          &quot; 从当前字符复制到行尾
p, P        &quot; 黏贴，p 黏贴到光标下一行，P 黏贴到光标上一行

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;九替换vi命令模式下使用&quot;&gt;九、替换(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:s/old/new //用new替换行中首次出现的old
:s/old/new/g //用new替换行中所有的old
:n,m s/old/new/g //用new替换从n到m行里所有的old
:%s/old/new/g //用new替换当前文件里所有的old
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;十编辑其他文件&quot;&gt;十、编辑其他文件&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:e otherfilename //编辑文件名为otherfilename的文件。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;十一修改文件格式&quot;&gt;十一、修改文件格式&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:set fileformat=unix //将文件修改为unix格式，如win下面的文本文件在linux下会出现^M。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;十二vim-键位整理&quot;&gt;十二、Vim 键位整理&lt;/h4&gt;

&lt;h5 id=&quot;1写入保存退出&quot;&gt;1)写入、保存、退出&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:q[uit]                 &quot; 退出
:q!                     &quot; 强制退出
:w[rite]                &quot; 保存
:w!                     &quot; 强制保存，能不能保存成功取决于用户对文件的权限
:w ! sudo tee %         &quot; 如果没有权限保存，试试这个命令
ZZ                      &quot; 两个大写的 Z，没有修改直接退出，有修改保存后退出

:w newfilename          &quot; 另存为新文件
:1, 10 w newfilename    &quot; 将 1 到 10 行的内容另存为新文件
:1, 10 w &amp;gt;&amp;gt; filename    &quot; 将 1 到 10 行的内容另存为新文件
:r filename             &quot; 将目标文件的内容追加到当前光标下一行
:3 r filename           &quot; 将目标文件的内容追加到第 3 行一下

:! ls                   &quot; 暂时离开 Vim 查看当前目录的文件，回车后返回 Vim
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;2光标移动&quot;&gt;2)光标移动&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;h           &quot; 方向键 ←
j           &quot; 方向键 ↓
k           &quot; 方向键 ↑
l           &quot; 方向键 →

0           &quot; 移动到行首
$           &quot; 移动到行尾的回车符
g_          &quot; 移动到行尾最后一个非空字符
gg          &quot; 移动到第一行
G           &quot; 移动到最后一行&quot;

w           &quot; 移动到下一个单词开头
e           &quot; 移动到单词的结尾
b           &quot; 移动到单词的开头

&quot; 不常用
nh          &quot; 向左移动 n 格，n 为数字
nl          &quot; 向右移动 n 格
nj          &quot; 向下移动 n 行
nk          &quot; 向上移动 n 行
n&amp;lt;space&amp;gt;    &quot; 向右移动 n 格，同 nl

H            &quot; 移动到当前屏幕第一行的第一个字符
M            &quot; 移动到当前屏幕中间行的第一个字符
L            &quot; 移动到当前屏幕最后一行的第一个字符
+            &quot; 移动到非空白字符的下一行
-            &quot; 移动到非空白字符的上一行

:n&amp;lt;cr&amp;gt;      &quot; 跳转到第 n 行
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;3翻页&quot;&gt;3)翻页&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;c-f&amp;gt;   &quot; 向下移动一页
&amp;lt;c-d&amp;gt;   &quot; 向下移动半页
&amp;lt;c-b&amp;gt;   &quot; 向上移动一页
&amp;lt;c-u&amp;gt;   &quot; 向上移动半页
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;4查找与替换&quot;&gt;4)查找与替换&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/word   &quot; 从光标位置向下搜索 word 单词
?word   &quot; 从光标位置向上搜索 word 单词
n       &quot; 英文字母 n，根据 / 或 ? 搜索的方向定位到下一个匹配目标
N       &quot; 与 n 相反，定位匹配目标

:n1,n2s/word1/word2/g   &quot; n1, n2 表示数字，替换 n1 行到 n2 行的单词
:1,$s/word1/word2/g     &quot; 全文替换，也可以写成 :%s/word1/word2/g
:1,$s/word1/word2/gc    &quot; 全文替换，并出现确认提示
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;5复制粘贴删除&quot;&gt;5)复制、粘贴、删除&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;x           &quot; 向后删除一个字符
nx          &quot; 向后删除 n 个字符
X           &quot; 向前删除一个字符
nX          &quot; 向前删除 n 个字符

dd          &quot; 删除当前行
ndd         &quot; 向下删除 n 行
d1G / dgg   &quot; 删除第一行到当前行的数据
dG          &quot; 删除当前行到最后一行的数据
d$          &quot; 删除当前字符到行尾
D           &quot; 删除当前字符到行尾
d0          &quot; 从行首删除到当前字符

yy          &quot; 复制当前行
Y           &quot; 复制当前行
nyy         &quot; 从当前行开始复制 n 行
y1G / ygg   &quot; 从第一行复制到当前行
yG          &quot; 从当前行复制到最后一行
y0          &quot; 从行首复制到当前字符
y$          &quot; 从当前字符复制到行尾

p, P        &quot; 黏贴，p 黏贴到光标下一行，P 黏贴到光标上一行
yyp         &quot; 复制并粘贴
ddp         &quot; 删除并粘贴，相当于下移当前行


&quot;+y         &quot; 复制本文到系统剪切板
&quot;+p         &quot; 粘贴系统剪切板到 Vim（不会影响文本格式）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;6插入&quot;&gt;6)插入&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;i   &quot; 在光标前进入 insert 模式
I   &quot; 在当前行左边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-a&amp;gt; 快捷键
a   &quot; 在光标后进入 insert 模式
A   &quot; 在当前行右边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-e&amp;gt; 快捷键
o   &quot; 在光标的下一行插入
O   &quot; 在光标的上一行插入
s   &quot; 删除当前字符，并进入 insert 模式
S   &quot; 删除当前行，并进入插入模式

vc  &quot; 删除当前字符，并进入 insert 模式
cc  &quot; 删除当前行，并进入插入模式
c0  &quot; 删除光标位置到行首，并进入 insert 模式
cg_ &quot; 删除光标位置到行尾最后一个非空字符，并进入 insert 模式
ce  &quot; 删除光标位置到单词末尾，并进入 insert 模式
cw  &quot; 删除光标位置到单词末尾，并进入 insert 模式
ciw &quot; 删除当前单词，并进入 insert 模式
cip &quot; 删除整个段落，并进入 insert 模式
ci( &quot; 删除当前括号内的内容，并进入 insert 模式 适用于 ([{&amp;lt;'` 等所有成对的标签
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;7撤销重做&quot;&gt;7)撤销重做&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;u       &quot; 撤销
&amp;lt;c-r&amp;gt;   &quot; 重做
.       &quot; 重复完成操作
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;8替换&quot;&gt;8)替换&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;r   &quot; 替换单个字符，自动返回 normal 模式
R   &quot; 连续替换多个字符，手动 &amp;lt;esc&amp;gt; 返回 normal 模式
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;9大小写&quot;&gt;9)大小写&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~       &quot; 当前字符大小写反转
g~~     &quot; 正行字符大小写反转
vu      &quot; 当前字符小写
vU      &quot; 当前字符大写
vU      &quot; 当前字符大写
viwu    &quot; 当前字符小写
viwU    &quot; 当前字符大写
ggguG   &quot; 文本所有字符小写
gggUG   &quot; 文本所有字符大写

:%s/\&amp;lt;./\u&amp;amp;/g       &quot; 将所有单词首字母大写（需要使用 :nohls 去掉高亮）
:%s/\&amp;lt;./\l&amp;amp;/g       &quot; 将所有单词首字母小写
:%s/.*/\u&amp;amp;          &quot; 将每行第一个字母大写
:%s/.*/\l&amp;amp;          &quot; 将每行第一个字母小写
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;10多窗口操作&quot;&gt;10)多窗口操作&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:sp filename        &quot; 上下分割窗口
:vs[p] filename     &quot; 左右分割窗口

&amp;lt;c-w&amp;gt;h[j[k[l]]]     &quot; 根据方向键移动光标到该方向的窗口上

&amp;lt;c-w&amp;gt;[N]&amp;gt;           &quot; N 位数字，可选，增加当前窗口 N 列宽&quot;
&amp;lt;c-w&amp;gt;[N]&amp;lt;           &quot; N 位数字，可选，减少当前窗口 N 列宽&quot;
&amp;lt;c-w&amp;gt;[N]+           &quot; N 位数字，可选，增加当前窗口 N 行高&quot;
&amp;lt;c-w&amp;gt;[N]-           &quot; N 位数字，可选，减少当前窗口 N 行高&quot;
&amp;lt;c-w&amp;gt;=              &quot; 将所有窗口设置等宽高

&amp;lt;c-w&amp;gt;[N]n           &quot; N 位数字，可选，打开一个新窗口 N 行高，默认为整个窗口的一半&quot;
&amp;lt;c-w&amp;gt;[N]s           &quot; N 位数字，可选，将当前窗口垂直分割为上下两个窗口展示&quot;
                    &quot; 新窗口可以为 N 行高，默认为整个窗口的一半&quot;
                    &quot; 类似于 :sp current_file&quot;
&amp;lt;c-w&amp;gt;[N]v           &quot; N 位数字，可选，将当前窗口水平分割为左右两个窗口展示&quot;
                    &quot; 新窗口可以为 N 列宽，默认为整个窗口的一半&quot;
                    &quot; 类似于 :vs current_file&quot;


&amp;lt;c-w&amp;gt;o              &quot; 关闭除当前窗口外的所有窗口

&amp;lt;c-w&amp;gt;r              &quot; 顺时针转动窗口
&amp;lt;c-w&amp;gt;R              &quot; 逆时针转动窗口
&amp;lt;c-w&amp;gt;x              &quot; 对调左右或上下两个对应的窗口

&amp;lt;c-w&amp;gt;q              &quot; 退出窗口
:q                  &quot; 退出窗口
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;11多文件编辑&quot;&gt;11)多文件编辑&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vim file1 file2     &quot; 同时打开两个文件

:files              &quot; 查看现在编辑的文件列表，%a 代表正在操作哪个文件
  1 %a   &quot;file1&quot;                        line 1
  2      &quot;file2&quot;                        line 0

:n                  &quot; 跳到下一个文件，这里的 n 就是字母
:N                  &quot; 跳到上一个文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;参考&lt;a href=&quot;http://vim.wxnacy.com/&quot;&gt;Vim 练级手册&lt;/a&gt;、&lt;a href=&quot;https://github.com/dofy/learn-vim&quot;&gt;learn-vim&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 27 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/2021-05-27Vim%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/2021-05-27Vim%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</guid>
        
        <category>vi</category>
        
        
      </item>
    
      <item>
        <title>iOS查找汉字字符串</title>
        <description>&lt;h1 id=&quot;ios查找汉字字符串&quot;&gt;iOS查找汉字字符串&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@&quot;[^&quot;]*[\u4E00-\u9FA5]+[^&quot;\n]*?&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 08 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/iOS%E6%9F%A5%E6%89%BE%E6%B1%89%E5%AD%97%E5%AD%97%E7%AC%A6%E4%B8%B2/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/iOS%E6%9F%A5%E6%89%BE%E6%B1%89%E5%AD%97%E5%AD%97%E7%AC%A6%E4%B8%B2/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
  </channel>
</rss>
