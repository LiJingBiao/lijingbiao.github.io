<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>LiJingBiao</title>
    <description>欢迎来到我的个人博客~</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Thu, 27 May 2021 16:21:05 +0800</pubDate>
    <lastBuildDate>Thu, 27 May 2021 16:21:05 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>iOS重签名脚本</title>
        <description>&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#说明：需要修改的参数&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 1. APP_NAME，如：APP_NAME=MiHome.app&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 2. KEYCHAIN_ID，即证书对应的SHA256, 如 KEYCHAIN_ID=&quot;B69D7658D231BD17F335B67E07BA333685C1F290&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 3. BUNDLE_IDENTIFIER，授权文件对应的BundleID，如BUNDLE_IDENTIFIER=&quot;com.dahuatech.lecheng&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 4. 授权文件，修改为embeded.mobileprovision后放入目录中，如PROVISION_IOS=&quot;${TEMP}/embeded.mobileprovision&quot;&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;############################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#通用函数定义&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#打印命令&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;echoCommand&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#打印xcode、编译环境信息&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;printXcodeInfo&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    xcode-select &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
    xcode-select &lt;span class=&quot;nt&quot;&gt;--print-path&lt;/span&gt;
    security find-identity &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; codesigning
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 打印电脑中安装的授权文件&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;printProvisionFiles&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; ~/Library/MobileDevice/Provisioning&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Profiles/
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Generate entitlements&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 通过Profile文件生成签名用的entitlements.plist文件&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数1：Profile文件，保存至ENTITLEMENTS_PLIST中&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#返回值：plist文件路径&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;generateEntitlementPlistFile&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-z&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
        &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Error: No profiles input...&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi

    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;provisionvalue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;parseEntitlement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;provisionvalue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;#*&amp;lt;key&amp;gt;Entitlements&amp;lt;/key&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;parseEntitlement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%%&amp;lt;/dict&amp;gt;*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;/&amp;lt;string&amp;gt;\*&amp;lt;\/string&amp;gt;/&amp;lt;array&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:funcshop.imoulife.com&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:dvl.lechange.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:dx.lechange.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:func.lechange.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;string&amp;gt;applinks&lt;/span&gt;:u5c.cn&lt;span class=&quot;p&quot;&gt;&amp;lt;/string&amp;gt;&amp;lt;/array&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementHeader1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;'&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementHeader2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;'&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementHeader3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&amp;lt;plist version=&quot;1.0&quot;&amp;gt;'&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;fullEntitlement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$entitlementHeader1$entitlementHeader2$entitlementHeader3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;entitlementFromMPP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;lt;/dict&amp;gt;&amp;lt;/plist&amp;gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;fullEntitlement&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/entitlements.plist&quot;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#echo &quot;------------ Entitlements file used --------------&quot;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#echo &quot;${fullEntitlement}&quot;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#echo &quot;--------------------------------------------------&quot;&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/entitlements.plist&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#对可执行文件进行签名&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数1：授权文件路径&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数2：证书KeychainId&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#参数3：可执行文件路径&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;resignFile&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Resign File: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;entitlementsPlist&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;generateEntitlementPlistFile &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#去除旧的签名&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Remove _CodeSignature...&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/_CodeSignature&quot;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#拷贝描述文件&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Copy provisioning file to ... &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/embedded.mobileprovision&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/embedded.mobileprovision&quot;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#目录下有Frameworks文件夹，则需要对所有动态库进行重签名&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Frameworks&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
        &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;codesign &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;/Frameworks/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;#对可执行文件进行签名&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;codesign &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$2&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--entitlements&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;entitlementsPlist&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$3&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;############################################################&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# main loop&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** *. List Xcode &amp;amp; codesign info... ********************]&quot;&lt;/span&gt;
printXcodeInfo

&lt;span class=&quot;c&quot;&gt;#echo &quot;[******************** *. List Provisionfiles ... ********************]&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#printProvisionFiles&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** 0. Check build path ... ********************]&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#文件夹路径&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#将xx.app拷贝到Payload目录下，自动读取App名称&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#APP_NAME=$(ls &quot;$TEMP/Payload&quot;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#将xxx.app拷贝到Resign目录下&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;MiHome.app
&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;%.*&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Check Path TEMP:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;AppName: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#临时处理，只是保证每次动态注入的二进制是原始的&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./Payload/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; MiHome.app ./Payload/

&lt;span class=&quot;c&quot;&gt;#检测二进制文件是否脱壳&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[*** Check crypt: otool -l Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; | grep crypt... ***] &quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;APP_CRYPT_INFO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;otool &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; Payload/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;crypt&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$APP_CRYPT_INFO&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$APP_CRYPT_INFO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;~ &lt;span class=&quot;s2&quot;&gt;&quot;cryptid 1&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** Fatal error, binary is encrypted... ********************]&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;exit
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[*** Check crypt succeed... ***] &quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi


&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** 1. Set resign parameters ... ********************]&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#证书签名变量【p12文件修改后需要更新】&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;B69D7658D231BD17F335B67E07BA333685C1F290&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;BUNDLE_IDENTIFIER&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;com.dahuatech.lecheng&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/embeded.mobileprovision&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#libCommonCrack.dylib，注入的动态库，不能加上路径，否则App在启动时执行路径会变成 dylib path @executable_path//Users/&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;LIB_COMMON_CRACK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;libCommonCrack.dylib&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;LIB_REVEAL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;libReveal.dylib&quot;&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#DISPLAY_NAME=&quot;&quot;    #eg.xxx&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** 2. Resigning for &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; ... ********************]&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#为方便签名，去除watch和插件文件夹&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;/Payload/&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;/Watch
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;/Payload/&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;/PlugIns

&lt;span class=&quot;c&quot;&gt;#修改BundleID&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$BUNDLE_IDENTIFIER&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;change bundle ID: &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUNDLE_IDENTIFIER&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Set :CFBundleIdentifier &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;BUNDLE_IDENTIFIER&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#修改App名称&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$DISPLAY_NAME&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;change display name: &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DISPLAY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Set :CFBundleDisplayName &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;DISPLAY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#删除UISupportedDevices&lt;/span&gt;
&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Delete :UISupportedDevices&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#设置为可以通过iTunes进行共享&lt;/span&gt;
&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Delete :UIFileSharingEnabled&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;/usr/libexec/PlistBuddy &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Add :UIFileSharingEnabled bool 1&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$APP_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Info.plist&quot;&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#注入动态库&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;yololib dynamic framework/lib: &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
./yololib &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt;
./yololib &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_BINARY_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$LIB_REVEAL&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#copy 动态库：将需要加载的动态库，拷贝到App主目录下&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;copy dynamic framework/lib&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./&lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; ./&lt;span class=&quot;nv&quot;&gt;$LIB_REVEAL&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;TEMP&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Resign file&lt;/span&gt;
resignFile &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LIB_COMMON_CRACK&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
resignFile &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$LIB_REVEAL&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
resignFile &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PROVISION_IOS&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;KEYCHAIN_ID&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Payload/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;===============================================&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Resign result&quot;&lt;/span&gt;
codesign &lt;span class=&quot;nt&quot;&gt;-dvvv&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TEMP&lt;/span&gt;/Payload/&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;APP_NAME&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#清理临时文件&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; entitlements.plist

&lt;span class=&quot;c&quot;&gt;# Zip file generate new ipa file&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;zip file generate new ipa file&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-rf&lt;/span&gt; resign.ipa
echoCommand &lt;span class=&quot;s2&quot;&gt;&quot;zip -qr resign.ipa Payload &quot;&lt;/span&gt;


&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[******************** End resigning ... ********************]&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 27 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/iOS%E9%87%8D%E7%AD%BE%E5%90%8D%E8%84%9A%E6%9C%AC/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/iOS%E9%87%8D%E7%AD%BE%E5%90%8D%E8%84%9A%E6%9C%AC/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>git回滚</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://www.zybuluo.com/qidiandasheng/note/889366&quot;&gt;转自git的使用&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;取消修改恢复版本&quot;&gt;取消修改，恢复版本&lt;/h1&gt;
&lt;h2 id=&quot;取消对单个文件的修改&quot;&gt;取消对单个文件的修改&lt;/h2&gt;
&lt;p&gt;这里指未commit的文件&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout -- &amp;lt;file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;取消所有未提交的修改&quot;&gt;取消所有未提交的修改&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clean -xdf   
or
git checkout .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;撤销git-commit未push&quot;&gt;撤销git commit(未push)&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;找到上次git commit的 id
git log
找到你想撤销的commit_id
比如下面就是我git log输出的最近两次commit，test是已经push到远程仓库的，test1是最新commit但没push的。如果我们想撤销test1这次的提交，则我需要的就是test这次的commit_id。
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:07:04 2017 +0800
  test1
commit 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 22:57:47 2017 +0800
  test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;git reset –hard commit_id
完成撤销,同时将代码恢复到commit_id 对应的版本。
如上一个例子中就是:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reset --hard 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17  
git reset commit_id
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改。
如上一个例子中就是:
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reset 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;h2 id=&quot;暂存到stash&quot;&gt;暂存到stash&lt;/h2&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git stash
//恢复
git stash pop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;h2 id=&quot;回滚&quot;&gt;回滚&lt;/h2&gt;
    &lt;p&gt;Revert 撤销一个提交的同时会创建一个新的提交。这是一个安全的方法，因为它不会重写提交历史。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;比如下面的这个例子的提交，如果我们不想要test1的这次提交了，上面我说过用&lt;code class=&quot;highlighter-rouge&quot;&gt;git reset --hard test_commit_id&lt;/code&gt;，但这是在&lt;code class=&quot;highlighter-rouge&quot;&gt;test1&lt;/code&gt;这次提交未push的情况下。
如果&lt;code class=&quot;highlighter-rouge&quot;&gt;test1&lt;/code&gt;这次提交已经push的话就应该使用&lt;code class=&quot;highlighter-rouge&quot;&gt;git revert test1_commit_id&lt;/code&gt;，这样的话代码就会把test1这次的代码修改进行撤销并重新生成一次commit，这样的话&lt;code class=&quot;highlighter-rouge&quot;&gt;test1&lt;/code&gt;的这次&lt;code class=&quot;highlighter-rouge&quot;&gt;commit&lt;/code&gt;还是存在于工作树上的，保持了工作树的干净。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:07:04 2017 +0800
    test1
commit 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 22:57:47 2017 +0800
    test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;git revert a5febeebf141dbd9a022dfe96a46cad9d474a5ad&lt;/code&gt;
回滚之后git log如下面所示：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;commit b80d6e00853f386159aa4a17ab40d9d375ad71d0
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:37:00 2017 +0800
    Revert &quot;test1&quot;
    This reverts commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad.
commit a5febeebf141dbd9a022dfe96a46cad9d474a5ad
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 23:07:04 2017 +0800
    test1
commit 3a2a9a3f3fd56ec0ebe2ada274d127b3ec9dcb17
Author: zhengqidian &amp;lt;zhengqidian@dasheng.com&amp;gt;
Date:   Mon Sep 18 22:57:47 2017 +0800
    test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;回滚中间很大一部分commit其中有merge-commit&quot;&gt;回滚中间很大一部分commit，其中有merge commit&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.v2ex.com/t/296286&quot;&gt;回滚&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;git reset –hard 4
git reset –soft 8
git commit -m ‘Reverted 5 6 7 8’&lt;/p&gt;

&lt;p&gt;其实楼主怕的是丢失提交记录，而不是使用 reset rebase 命令&lt;/p&gt;

&lt;h2 id=&quot;查看当前分支是基于哪个分支创建的&quot;&gt;查看当前分支是基于哪个分支创建的&lt;/h2&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; git reflog show &amp;lt;branchName&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;检查本地的代码修改情况&quot;&gt;检查本地的代码修改情况&lt;/h2&gt;

&lt;p&gt;git diff 可以查看当前没有add 的内容修改（不在缓冲区的文件变化）&lt;/p&gt;

&lt;p&gt;git diff –cached查看已经add但没有commit 的改动（在缓冲区的文件变化）&lt;/p&gt;

&lt;p&gt;git diff HEAD 是上面两条命令的合并&lt;/p&gt;

&lt;h2 id=&quot;查看未git-push到远程代码库的git-commit&quot;&gt;查看未git push到远程代码库的git commit&lt;/h2&gt;

&lt;p&gt;git status 只能查看未传送提交的次数&lt;/p&gt;

&lt;p&gt;git cherry -v 只能查看未传送提交的描述/说明&lt;/p&gt;

&lt;p&gt;git log master ^origin/master 则可以查看未传送提交的详细信息&lt;/p&gt;

&lt;h2 id=&quot;输入用户名和密码&quot;&gt;输入用户名和密码&lt;/h2&gt;

&lt;p&gt;https协议push的时候需要输入用户名和密码问题:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config --global credential.helper store
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后你会在你本地生成一个文本，上边记录你的账号和密码。&lt;/p&gt;

&lt;h2 id=&quot;pull-或者-push-一个大项目时报错&quot;&gt;pull 或者 push 一个大项目时报错&lt;/h2&gt;

&lt;p&gt;errno 56，那么应该是有大文件或者提交缓存方面的问题。而 errno 54 则不是这个问题。对于 56 错误的解决方式与网络上大部分文章的一致。都是增大缓存配置，比如下面就是配置提交缓存为 500M。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config http.postBuffer 524288000
git config https.postBuffer 524288000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Thu, 27 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/git%E5%9B%9E%E6%BB%9A/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/git%E5%9B%9E%E6%BB%9A/</guid>
        
        <category>git</category>
        
        
      </item>
    
      <item>
        <title>2021-05-27 Vim使用教程</title>
        <description>&lt;h1 id=&quot;2021-05-27-vim使用教程&quot;&gt;2021-05-27 Vim使用教程&lt;/h1&gt;

&lt;h2 id=&quot;vim&quot;&gt;Vim&lt;/h2&gt;

&lt;p&gt;最近学习所以记录下&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/vi/1429599-b7c061ff85281d7a.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/images/posts/vi/vim-cheat-sheet-en.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/images/posts/vi/preview.png&quot; alt=&quot;&quot; /&gt;
&lt;img src=&quot;/images/posts/vi/vim_cheat_sheet_for_programmers_screen.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;vivim-的使用&quot;&gt;vi/vim 的使用&lt;/h3&gt;

&lt;p&gt;基本上 vi/vim 共分为三种模式，分别是&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;命令模式（Command mode）&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;输入模式（Insert mode）&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;底线命令模式（Last line mode）&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这三种模式的作用分别是：&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;命令模式&quot;&gt;命令模式：&lt;/h3&gt;

&lt;p&gt;用户刚刚启动 vi/vim，便进入了命令模式。&lt;/p&gt;

&lt;p&gt;此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。&lt;/p&gt;

&lt;p&gt;以下是常用的几个命令：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;i 切换到输入模式，以输入字符。
x 删除当前光标所在处的字符。
: 切换到底线命令模式，以在最底一行输入命令。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;若想要编辑文本：启动Vim，进入了命令模式，按下i，切换到输入模式。&lt;/p&gt;

&lt;p&gt;命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;输入模式&quot;&gt;输入模式&lt;/h3&gt;

&lt;p&gt;在命令模式下按下i就进入了输入模式。&lt;/p&gt;

&lt;p&gt;在输入模式中，可以使用以下按键：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;字符按键以及Shift组合，输入字符
ENTER，回车键，换行
BACK SPACE，退格键，删除光标前一个字符
DEL，删除键，删除光标后一个字符
方向键，在文本中移动光标
HOME/END，移动光标到行首/行尾
Page Up/Page Down，上/下翻页
Insert，切换光标为输入/替换模式，光标将变成竖线/下划线
ESC，退出输入模式，切换到命令模式
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;底线命令模式&quot;&gt;底线命令模式&lt;/h3&gt;

&lt;p&gt;在命令模式下按下:（英文冒号）就进入了底线命令模式。&lt;/p&gt;

&lt;p&gt;底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。&lt;/p&gt;

&lt;p&gt;在底线命令模式中，基本的命令有（已经省略了冒号）：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;q 退出程序
w 保存文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;按ESC键可随时退出底线命令模式。&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;一打开文件保存关闭文件vi命令模式下使用&quot;&gt;一、打开文件、保存、关闭文件(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vi filename //打开filename文件
:w //保存文件
:w vpser.net //保存至vpser.net文件
:q //退出编辑器，如果文件已修改请使用下面的命令
:q! //退出编辑器，且不保存
:wq //退出编辑器，且保存文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;二插入文本或行vi命令模式下使用执行下面命令后将进入插入模式按esc键可退出插入模式&quot;&gt;二、插入文本或行(vi命令模式下使用，执行下面命令后将进入插入模式，按ESC键可退出插入模式)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;i   &quot; 在光标前进入 insert 模式
I   &quot; 在当前行左边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-a&amp;gt; 快捷键
a   &quot; 在光标后进入 insert 模式
A   &quot; 在当前行右边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-e&amp;gt; 快捷键
o   &quot; 在光标的下一行插入
O   &quot; 在光标的上一行插入
s   &quot; 删除当前字符，并进入 insert 模式&quot;
S   &quot; 删除当前行，并进入插入模式
cc  &quot; 删除当前行，并进入插入模式
R //替换(覆盖)当前光标位置及后面的若干文本
J //合并光标所在行及下一行为一行(依然在命令模式)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;三键位操作&quot;&gt;三、键位操作&lt;/h4&gt;

&lt;h5 id=&quot;1移动光标vi命令模式下使用&quot;&gt;1)移动光标(vi命令模式下使用)&lt;/h5&gt;

&lt;p&gt;1、使用上下左右方向键&lt;/p&gt;

&lt;p&gt;2、命令模式下：h 向左、j 向下 、k 向上、l 向右。&lt;br /&gt;
空格键 向右、Backspace 向左、Enter 移动到下一行首、- 移动到上一行首。&lt;/p&gt;

&lt;p&gt;3、借助数字键可以更快的做到光标跳转，5l 表示向右移动 5 个字符，5j 表示向下移动 5 行，其他依次类推&lt;/p&gt;

&lt;h5 id=&quot;2翻页&quot;&gt;2)翻页&lt;/h5&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;ctrl&amp;gt; + f &lt;/code&gt;的组合键可以向下翻一页，这类的组合键以后我会用&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;c-f&amp;gt;&lt;/code&gt;形式表示。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;c-f&amp;gt;   //向下移动一页
&amp;lt;c-d&amp;gt;   //向下移动半页
&amp;lt;c-b&amp;gt;   //向上移动一页
&amp;lt;c-u&amp;gt;   //向上移动半页
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;3行首行尾&quot;&gt;3)行首行尾&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0   &quot; 快速跳到行首
$   &quot; 快速跳到行尾
g_  &quot; 快速跳到行尾最后一个非空字符（后面讨论它跟 $ 的区别）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;跳到指定行
方法1：
输入:n，代表跳转到第n行，如:79，就跳转到第79行。
方法2：
输入nG，代表跳转到第n行，如79G，就跳转到第79行。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;4页头页尾&quot;&gt;4)页头页尾&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gg  &quot; 快速跳到第一行
G   &quot; 快速跳到最后一行
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;四删除恢复字符或行vi命令模式下使用&quot;&gt;四、删除、恢复字符或行(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;x //删除当前字符
nx //删除从光标开始的n个字符
dd //删除当前行
ndd //向下删除当前行在内的n行
u //撤销上一步操作
U //撤销对当前行的所有操作
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;五搜索vi命令模式下使用&quot;&gt;五、搜索(vi命令模式下使用)&lt;/h4&gt;

&lt;h5 id=&quot;1行内查找&quot;&gt;1)行内查找&lt;/h5&gt;

&lt;p&gt;在目标行内按下功能键 f，此时界面无变化，但是右下角会出现字母 f 表示等待下一步操作，然后按下 n，光标便会移动到 native 的首字母上&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;fx      &quot; 从当前光标开始向右查找字符 x，x 为目标字符
nfx     &quot; 从当前广告开始向右查找第 n 个字符 x，n 为数字
Fx      &quot; 从当前光标开始向左查找字符 x，x 为目标字符
nfx     &quot; 从当前广告开始向左查找第 n 个字符 x，n 为数字
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;同样的，在这里我建议大家开始只使用向右查找即可，这样也比较符合我们由左到右的阅读习惯，顶多每次先按一下 0 跳到行首就可以了。&lt;/p&gt;

&lt;h5 id=&quot;2全文查找&quot;&gt;2)全文查找&lt;/h5&gt;

&lt;p&gt;如果你想要把全文的 native 都找到，可以按下 / 进入 command 模式，随后输入 native 然后回车，此时光标会定位在第一个目标上，并高亮所有找到的目标单词。&lt;/p&gt;

&lt;p&gt;此时按下 n 光标就会向下在高亮的单词上依次跳转，N 则会反方向跳转。值得注意的地方时，Native 也会被找到，说明默认情况下查找对小写是不敏感的，在以后的章节我们会来讨论怎么处理，但是它对大写是敏感的，你可以用 Native 查找试试。&lt;/p&gt;

&lt;p&gt;最后一点，现在所有的目标区域都是高亮的，怎么取消呢？输入 :nohls 即可，为什么，我们以后再讲。&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/word   &quot; 输入 / 会进入 command 模式，再输入先要搜索的单词并回车进行搜索
?word   &quot; / 是向光标以后搜索，? 是向前搜索
n       &quot; 英文字母 n，根据 / 或 ? 搜索的方向定位到下一个匹配目标
N       &quot; 与 n 相反，定位匹配目标
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;3替换&quot;&gt;3)替换&lt;/h5&gt;

&lt;p&gt;替换一般都是和查找绑定在一起的操作，Vim 中提供了两种替换方式&lt;/p&gt;

&lt;p&gt;将 4 到 10 行内的 code 替换为 name&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:4,10s/code/name/g
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;4全文替换&quot;&gt;4)全文替换&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:1,$s/code/name/g
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;不难理解，其实全文替换你也可以理解为替换 1 行到 $ 最后一行，唯一需要注意的是，第二个数字后面要记得跟上 s&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:n1,n2s/word1/word2/g   &quot; n1, n2 表示数字，替换 n1 行到 n2 行的单词
:1,$s/word1/word2/g     &quot; 全文替换，也可以写成 :%s/word1/word2/g
:1,$s/word1/word2/gc    &quot; 全文替换，并出现确认提示
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;替换光标所在的行&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:s/word1/word2/g        &quot; 替换光标当前所在行的内容，不需要输入行号
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/vpser //向光标下搜索vpser字符串
?vpser //向光标上搜索vpser字符串
n //向下搜索前一个搜素动作
N //向上搜索前一个搜索动作
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;六跳至指定行vi命令模式下使用&quot;&gt;六、跳至指定行(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;n+ //向下跳n行
n- //向上跳n行
nG //跳到行号为n的行
G //跳至文件的底部
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;七设置行号vi命令模式下使用&quot;&gt;七、设置行号(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:set nu //显示行号
:set nonu //取消显示行号
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;八复制粘贴vi命令模式下使用&quot;&gt;八、复制、粘贴(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yy //将当前行复制到缓存区，也可以用 &quot;ayy 复制，&quot;a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
nyy //将当前行向下n行复制到缓冲区，也可以用 &quot;anyy 复制，&quot;a 为缓冲区，a也可以替换为a到z的任意字母，可以完成多个复制任务。
yw //复制从光标开始到词尾的字符。
nyw //复制从光标开始的n个单词。
y^ //复制从光标到行首的内容。 VPS侦探
y$ //复制从光标到行尾的内容。
p //粘贴剪切板里的内容在光标后，如果使用了前面的自定义缓冲区，建议使用&quot;ap 进行粘贴。
P //粘贴剪切板里的内容在光标前，如果使用了前面的自定义缓冲区，建议使用&quot;aP 进行粘贴。
dd          &quot; 删除当前行
ndd         &quot; 向下删除 n 行
d1G / dgg   &quot; 删除第一行到当前行的数据
dG          &quot; 删除当前行到最后一行的数据
d$          &quot; 删除当前字符到行尾
d0          &quot; 从行首删除到当前字符
yy          &quot; 复制当前行
nyy         &quot; 从当前行开始复制 n 行
y1G / ygg   &quot; 从第一行复制到当前行
yG          &quot; 从当前行复制到最后一行
y0          &quot; 从行首复制到当前字符
y$          &quot; 从当前字符复制到行尾
p, P        &quot; 黏贴，p 黏贴到光标下一行，P 黏贴到光标上一行

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;九替换vi命令模式下使用&quot;&gt;九、替换(vi命令模式下使用)&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:s/old/new //用new替换行中首次出现的old
:s/old/new/g //用new替换行中所有的old
:n,m s/old/new/g //用new替换从n到m行里所有的old
:%s/old/new/g //用new替换当前文件里所有的old
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;十编辑其他文件&quot;&gt;十、编辑其他文件&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:e otherfilename //编辑文件名为otherfilename的文件。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;十一修改文件格式&quot;&gt;十一、修改文件格式&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:set fileformat=unix //将文件修改为unix格式，如win下面的文本文件在linux下会出现^M。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;十二vim-键位整理&quot;&gt;十二、Vim 键位整理&lt;/h4&gt;

&lt;h5 id=&quot;1写入保存退出&quot;&gt;1)写入、保存、退出&lt;/h5&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:q[uit]                 &quot; 退出
:q!                     &quot; 强制退出
:w[rite]                &quot; 保存
:w!                     &quot; 强制保存，能不能保存成功取决于用户对文件的权限
:w ! sudo tee %         &quot; 如果没有权限保存，试试这个命令
ZZ                      &quot; 两个大写的 Z，没有修改直接退出，有修改保存后退出

:w newfilename          &quot; 另存为新文件
:1, 10 w newfilename    &quot; 将 1 到 10 行的内容另存为新文件
:1, 10 w &amp;gt;&amp;gt; filename    &quot; 将 1 到 10 行的内容另存为新文件
:r filename             &quot; 将目标文件的内容追加到当前光标下一行
:3 r filename           &quot; 将目标文件的内容追加到第 3 行一下

:! ls                   &quot; 暂时离开 Vim 查看当前目录的文件，回车后返回 Vim
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;2光标移动&quot;&gt;2)光标移动&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;h           &quot; 方向键 ←
j           &quot; 方向键 ↓
k           &quot; 方向键 ↑
l           &quot; 方向键 →

0           &quot; 移动到行首
$           &quot; 移动到行尾的回车符
g_          &quot; 移动到行尾最后一个非空字符
gg          &quot; 移动到第一行
G           &quot; 移动到最后一行&quot;

w           &quot; 移动到下一个单词开头
e           &quot; 移动到单词的结尾
b           &quot; 移动到单词的开头

&quot; 不常用
nh          &quot; 向左移动 n 格，n 为数字
nl          &quot; 向右移动 n 格
nj          &quot; 向下移动 n 行
nk          &quot; 向上移动 n 行
n&amp;lt;space&amp;gt;    &quot; 向右移动 n 格，同 nl

H            &quot; 移动到当前屏幕第一行的第一个字符
M            &quot; 移动到当前屏幕中间行的第一个字符
L            &quot; 移动到当前屏幕最后一行的第一个字符
+            &quot; 移动到非空白字符的下一行
-            &quot; 移动到非空白字符的上一行

:n&amp;lt;cr&amp;gt;      &quot; 跳转到第 n 行
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;3翻页&quot;&gt;3)翻页&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;c-f&amp;gt;   &quot; 向下移动一页
&amp;lt;c-d&amp;gt;   &quot; 向下移动半页
&amp;lt;c-b&amp;gt;   &quot; 向上移动一页
&amp;lt;c-u&amp;gt;   &quot; 向上移动半页
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;4查找与替换&quot;&gt;4)查找与替换&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/word   &quot; 从光标位置向下搜索 word 单词
?word   &quot; 从光标位置向上搜索 word 单词
n       &quot; 英文字母 n，根据 / 或 ? 搜索的方向定位到下一个匹配目标
N       &quot; 与 n 相反，定位匹配目标

:n1,n2s/word1/word2/g   &quot; n1, n2 表示数字，替换 n1 行到 n2 行的单词
:1,$s/word1/word2/g     &quot; 全文替换，也可以写成 :%s/word1/word2/g
:1,$s/word1/word2/gc    &quot; 全文替换，并出现确认提示
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;5复制粘贴删除&quot;&gt;5)复制、粘贴、删除&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;x           &quot; 向后删除一个字符
nx          &quot; 向后删除 n 个字符
X           &quot; 向前删除一个字符
nX          &quot; 向前删除 n 个字符

dd          &quot; 删除当前行
ndd         &quot; 向下删除 n 行
d1G / dgg   &quot; 删除第一行到当前行的数据
dG          &quot; 删除当前行到最后一行的数据
d$          &quot; 删除当前字符到行尾
D           &quot; 删除当前字符到行尾
d0          &quot; 从行首删除到当前字符

yy          &quot; 复制当前行
Y           &quot; 复制当前行
nyy         &quot; 从当前行开始复制 n 行
y1G / ygg   &quot; 从第一行复制到当前行
yG          &quot; 从当前行复制到最后一行
y0          &quot; 从行首复制到当前字符
y$          &quot; 从当前字符复制到行尾

p, P        &quot; 黏贴，p 黏贴到光标下一行，P 黏贴到光标上一行
yyp         &quot; 复制并粘贴
ddp         &quot; 删除并粘贴，相当于下移当前行


&quot;+y         &quot; 复制本文到系统剪切板
&quot;+p         &quot; 粘贴系统剪切板到 Vim（不会影响文本格式）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;6插入&quot;&gt;6)插入&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;i   &quot; 在光标前进入 insert 模式
I   &quot; 在当前行左边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-a&amp;gt; 快捷键
a   &quot; 在光标后进入 insert 模式
A   &quot; 在当前行右边第一个非空字符前进入 insert 模式，类似其他编辑器的 &amp;lt;c-e&amp;gt; 快捷键
o   &quot; 在光标的下一行插入
O   &quot; 在光标的上一行插入
s   &quot; 删除当前字符，并进入 insert 模式
S   &quot; 删除当前行，并进入插入模式

vc  &quot; 删除当前字符，并进入 insert 模式
cc  &quot; 删除当前行，并进入插入模式
c0  &quot; 删除光标位置到行首，并进入 insert 模式
cg_ &quot; 删除光标位置到行尾最后一个非空字符，并进入 insert 模式
ce  &quot; 删除光标位置到单词末尾，并进入 insert 模式
cw  &quot; 删除光标位置到单词末尾，并进入 insert 模式
ciw &quot; 删除当前单词，并进入 insert 模式
cip &quot; 删除整个段落，并进入 insert 模式
ci( &quot; 删除当前括号内的内容，并进入 insert 模式 适用于 ([{&amp;lt;'` 等所有成对的标签
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;7撤销重做&quot;&gt;7)撤销重做&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;u       &quot; 撤销
&amp;lt;c-r&amp;gt;   &quot; 重做
.       &quot; 重复完成操作
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;8替换&quot;&gt;8)替换&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;r   &quot; 替换单个字符，自动返回 normal 模式
R   &quot; 连续替换多个字符，手动 &amp;lt;esc&amp;gt; 返回 normal 模式
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;9大小写&quot;&gt;9)大小写&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~       &quot; 当前字符大小写反转
g~~     &quot; 正行字符大小写反转
vu      &quot; 当前字符小写
vU      &quot; 当前字符大写
vU      &quot; 当前字符大写
viwu    &quot; 当前字符小写
viwU    &quot; 当前字符大写
ggguG   &quot; 文本所有字符小写
gggUG   &quot; 文本所有字符大写

:%s/\&amp;lt;./\u&amp;amp;/g       &quot; 将所有单词首字母大写（需要使用 :nohls 去掉高亮）
:%s/\&amp;lt;./\l&amp;amp;/g       &quot; 将所有单词首字母小写
:%s/.*/\u&amp;amp;          &quot; 将每行第一个字母大写
:%s/.*/\l&amp;amp;          &quot; 将每行第一个字母小写
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;10多窗口操作&quot;&gt;10)多窗口操作&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;:sp filename        &quot; 上下分割窗口
:vs[p] filename     &quot; 左右分割窗口

&amp;lt;c-w&amp;gt;h[j[k[l]]]     &quot; 根据方向键移动光标到该方向的窗口上

&amp;lt;c-w&amp;gt;[N]&amp;gt;           &quot; N 位数字，可选，增加当前窗口 N 列宽&quot;
&amp;lt;c-w&amp;gt;[N]&amp;lt;           &quot; N 位数字，可选，减少当前窗口 N 列宽&quot;
&amp;lt;c-w&amp;gt;[N]+           &quot; N 位数字，可选，增加当前窗口 N 行高&quot;
&amp;lt;c-w&amp;gt;[N]-           &quot; N 位数字，可选，减少当前窗口 N 行高&quot;
&amp;lt;c-w&amp;gt;=              &quot; 将所有窗口设置等宽高

&amp;lt;c-w&amp;gt;[N]n           &quot; N 位数字，可选，打开一个新窗口 N 行高，默认为整个窗口的一半&quot;
&amp;lt;c-w&amp;gt;[N]s           &quot; N 位数字，可选，将当前窗口垂直分割为上下两个窗口展示&quot;
                    &quot; 新窗口可以为 N 行高，默认为整个窗口的一半&quot;
                    &quot; 类似于 :sp current_file&quot;
&amp;lt;c-w&amp;gt;[N]v           &quot; N 位数字，可选，将当前窗口水平分割为左右两个窗口展示&quot;
                    &quot; 新窗口可以为 N 列宽，默认为整个窗口的一半&quot;
                    &quot; 类似于 :vs current_file&quot;


&amp;lt;c-w&amp;gt;o              &quot; 关闭除当前窗口外的所有窗口

&amp;lt;c-w&amp;gt;r              &quot; 顺时针转动窗口
&amp;lt;c-w&amp;gt;R              &quot; 逆时针转动窗口
&amp;lt;c-w&amp;gt;x              &quot; 对调左右或上下两个对应的窗口

&amp;lt;c-w&amp;gt;q              &quot; 退出窗口
:q                  &quot; 退出窗口
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h5 id=&quot;11多文件编辑&quot;&gt;11)多文件编辑&lt;/h5&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;vim file1 file2     &quot; 同时打开两个文件

:files              &quot; 查看现在编辑的文件列表，%a 代表正在操作哪个文件
  1 %a   &quot;file1&quot;                        line 1
  2      &quot;file2&quot;                        line 0

:n                  &quot; 跳到下一个文件，这里的 n 就是字母
:N                  &quot; 跳到上一个文件
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;参考&lt;a href=&quot;http://vim.wxnacy.com/&quot;&gt;Vim 练级手册&lt;/a&gt;、&lt;a href=&quot;https://github.com/dofy/learn-vim&quot;&gt;learn-vim&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 27 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/2021-05-27Vim%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/2021-05-27Vim%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</guid>
        
        <category>vi</category>
        
        
      </item>
    
      <item>
        <title>iOS查找汉字字符串</title>
        <description>&lt;h1 id=&quot;ios查找汉字字符串&quot;&gt;iOS查找汉字字符串&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@&quot;[^&quot;]*[\u4E00-\u9FA5]+[^&quot;\n]*?&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 08 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/iOS%E6%9F%A5%E6%89%BE%E6%B1%89%E5%AD%97%E5%AD%97%E7%AC%A6%E4%B8%B2/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/iOS%E6%9F%A5%E6%89%BE%E6%B1%89%E5%AD%97%E5%AD%97%E7%AC%A6%E4%B8%B2/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>git切换到某个tag</title>
        <description>&lt;h1 id=&quot;git切换到某个tag&quot;&gt;git切换到某个tag&lt;/h1&gt;
&lt;p&gt;git clone 整个仓库后使用，以下命令就可以取得该tag 对应的代码了。 &lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout tag_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;但是，这时候 git 可能会提示你当前处于一个&lt;code class=&quot;highlighter-rouge&quot;&gt;detached HEAD&lt;/code&gt; 状态。&lt;/p&gt;

&lt;p&gt;因为 tag 相当于是一个快照，是不能更改它的代码的。&lt;/p&gt;

&lt;p&gt;如果要在 tag 代码的基础上做修改，你需要一个分支： &lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout -b branch_name tag_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;这样会从 tag 创建一个分支，然后就和普通的 git 操作一样了。&lt;/p&gt;

&lt;p&gt;如果项目上有一个后来新建的分支test，并且使用&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git branch -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;看不到该远程分支：&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* develop
  remotes/composer/develop
  remotes/composer/feature/194
  remotes/composer/feature/198
  remotes/composer/feature/199
  remotes/composer/feature/200
  remotes/composer/master
  remotes/origin/HEAD -&amp;gt; origin/develop
  remotes/origin/develop
  remotes/origin/feature/194
  remotes/origin/feature/198
  remotes/origin/feature/199
  remotes/origin/feature/200
  remotes/origin/master
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;直接使用命令&lt;code class=&quot;highlighter-rouge&quot;&gt;git checkout test&lt;/code&gt;，出现以下错误&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;error: pathspec 'origin/XXX' did not match any file(s) known to git.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;项目上有一个分支test，使用&lt;code class=&quot;highlighter-rouge&quot;&gt;git branch -a&lt;/code&gt;看不到该远程分支，直接使用命令
&lt;code class=&quot;highlighter-rouge&quot;&gt;git checkout test&lt;/code&gt;报错如下：
解决方法是：&lt;/p&gt;

&lt;p&gt;1、执行命令git fetch取回所有分支的更新&lt;/p&gt;

&lt;p&gt;2、执行git branch -a可以看到test分支（已经更新分支信息）&lt;/p&gt;

&lt;p&gt;3、切换分支git checkout test&lt;/p&gt;

&lt;h1 id=&quot;git切换到某个commit-id&quot;&gt;git切换到某个commit Id&lt;/h1&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//1.找到你的日志commit号为22dfbf1f907764c5ae70381b8191104f9af21d8c 
git log
//2.切换到这个commit下
git checkout 22dfbf1f907764c5ae70381b8191104f9af21d8c
//3.在本地新建一个dev_2.0分支
git checkout -b dev_2.0 22dfbf1f907764c5ae70381b8191104f9af21d8c
//4.查看分支
git branch
//5.将本地dev_2.0分支推到远程
git push --set-upstream origin dev_2.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 08 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/git%E5%88%87%E6%8D%A2%E5%88%B0%E6%9F%90%E4%B8%AAtag/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/git%E5%88%87%E6%8D%A2%E5%88%B0%E6%9F%90%E4%B8%AAtag/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>xcconfig的使用与xcode环境变量</title>
        <description>&lt;h1 id=&quot;xcconfig的使用与xcode环境变量&quot;&gt;xcconfig的使用与xcode环境变量&lt;/h1&gt;

&lt;p&gt;在正式使用xcconfig之前，还是得先把这几个概念给区分一下。什么是workspace，什么是project，什么是target。下面一张图简单说明：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/iOS/xcconfig/1293297-1a55808c63b6d254.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;workspace，顾名思义就是我们的工作区。一个workspace可以包含多个project以及一些其它文件。workspace也可以把多可以project组织起来。&lt;/li&gt;
  &lt;li&gt;一个project会包含属于这个项目的所有文件，资源，以及生成一个或者多个软件产品的信息。&lt;/li&gt;
  &lt;li&gt;一个project会包含一个或者多个 target，而每一个 target都对应一个products，也就是最终产生的.app。&lt;/li&gt;
  &lt;li&gt;一个targets可以有多个configuration（如我们平常用到的debug和release，当然我们还可以自己添加），每个configuration就会有对应的build settings。每次build都是在一个configuration下build的。&lt;/li&gt;
  &lt;li&gt;build setting 中包含了 product 生成过程中所需的参数信息。project的build settings会对于整个project 中的所有targets生效，而target的build settings是重写了project的build settings，重写的配置以target为准。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;那么，什么又是scheme呢？scheme就相当于一个组织者。在build的时候，schema会指定一个target和configuration，这样就能保证在build的时候configuration的唯一性，就能产生一个特定的product。&lt;/p&gt;

&lt;p&gt;OK。理清了这些环境变量后，就可以来介绍一下xcconfig了。&lt;br /&gt;
在项目中使用了cocoapods的都会发现，在pod项目中有.xcconfig这样的文件，一般有多少个configuration就会有多少个.xcconfig这样的文件。一般工程中就分为debug和release两个。这里的.xcconfig文件就是通过文本方式指定build settings的一种形式。&lt;/p&gt;

&lt;p&gt;所以我们也可以在工程中通过创建xcconfig来指定build settings。这样能够更加方面管理和修改。&lt;/p&gt;

&lt;p&gt;下面我在一个demo工程中创建了几个xcconfig。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/iOS/xcconfig/1293297-90b863682f33401e.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;其中common为通用configuration。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/iOS/xcconfig/1293297-d0fc013b5a6e9730.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;所有环境相同的settings可以写在这里。然后你就可以在里面去添加任意键值对了。下面是&lt;code class=&quot;highlighter-rouge&quot;&gt;settings.release.xcconfig&lt;/code&gt;的一个示例。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// settings.release.xcconfig
#include &quot;settings.common.xcconfig&quot;
#include &quot;Pods/Target Support Files/Pods-TTLivenessDetection_Example/Pods-TTLivenessDetection_Example.release.xcconfig&quot;
ONLY_ACTIVE_ARCH = NO
ENABLE_BITCODE = YES
test = 123
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后在project-&amp;gt;info中去设置。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/iOS/xcconfig/1293297-cf1ac2fc9ef5e5f5.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;这里有个坑就是自定义配置后会导致cocoapods无法使用，这里需要在相应的xcconfig里面导入相应的pod的xcconfig&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#include &quot;Pods/Target Support Files/Pods-TTLivenessDetection_Example/Pods-
TTLivenessDetection_Example.release.xcconfig&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果还报这种错&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[!] The `TTLivenessDetection_Example [Debug]` target overrides the 
`HEADER_SEARCH_PATHS` build setting defined in `Pods/Target Support 
Files/Pods-TTLivenessDetection_Example/Pods-
TTLivenessDetection_Example.debug.xcconfig'. This can lead to problems with the CocoaPods installation
    - Use the `$(inherited)` flag, or
    - Remove the build settings from the target.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;按照它说的把&lt;code class=&quot;highlighter-rouge&quot;&gt;HEADER_SEARCH_PATHS&lt;/code&gt;改为&lt;code class=&quot;highlighter-rouge&quot;&gt;$(inherited)&lt;/code&gt;就可以了。&lt;/p&gt;

&lt;p&gt;另外就是这里有个继承关系，打开levels可以查看&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/iOS/xcconfig/1293297-c3f3005ab8c0d992.webp&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;其中继承关系如下：&lt;br /&gt;
Target configuration-&amp;gt;Target xcconfig-&amp;gt;Project configuration-&amp;gt;Project xcconfig。&lt;/p&gt;

&lt;p&gt;也就是说如果是单一的配置，继承级低的会覆盖继承等级高的，而像$()这样的会进行叠加。&lt;/p&gt;

</description>
        <pubDate>Fri, 07 May 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/05/xcconfig%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8Excode%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/05/xcconfig%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8Excode%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>iOS添加调试命令</title>
        <description>&lt;p&gt;MonkeyDev里面的添加lldb命令&lt;/p&gt;

&lt;p&gt;LLDBTools.h文件&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; #import &amp;lt;UIKit/UIKit.h&amp;gt;
 #import &amp;lt;mach/vm_types.h&amp;gt;

 //(lldb) po pviews()

 NSString* pvc(void);

 NSString* pviews(void);

 NSString* pactions(vm_address_t address);

 NSString* pblock(vm_address_t address);

 NSString* methods(const char * classname);

 NSString* ivars(vm_address_t address);

 NSString* choose(const char* classname);

 NSString* vmmap();

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;LLDBTools.mm文件&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#pragma GCC diagnostic ignored &quot;-Wundeclared-selector&quot;

#import &quot;LLDBTools.h&quot;
#import &amp;lt;set&amp;gt;
#import &amp;lt;mach/mach_types.h&amp;gt;
#import &amp;lt;malloc/malloc.h&amp;gt;
#import &amp;lt;objc/runtime.h&amp;gt;
#import &amp;lt;mach/mach_init.h&amp;gt;
#import &amp;lt;mach/mach_error.h&amp;gt;

enum {
    BLOCK_HAS_COPY_DISPOSE =  (1 &amp;lt;&amp;lt; 25),
    BLOCK_HAS_CTOR =          (1 &amp;lt;&amp;lt; 26), // helpers have C++ code
    BLOCK_IS_GLOBAL =         (1 &amp;lt;&amp;lt; 28),
    BLOCK_HAS_STRET =         (1 &amp;lt;&amp;lt; 29), // IFF BLOCK_HAS_SIGNATURE
    BLOCK_HAS_SIGNATURE =     (1 &amp;lt;&amp;lt; 30),
};

struct Block_literal_1 {
    void *isa; // initialized to &amp;amp;_NSConcreteStackBlock or &amp;amp;_NSConcreteGlobalBlock
    int flags;
    int reserved;
    void (*invoke)(void *, ...);
    struct Block_descriptor_1 {
        unsigned long int reserved; // NULL
        unsigned long int size;         // sizeof(struct Block_literal_1)
        // optional helper functions
        void (*copy_helper)(void *dst, void *src);     // IFF (1&amp;lt;&amp;lt;25)
        void (*dispose_helper)(void *src);             // IFF (1&amp;lt;&amp;lt;25)
        // required ABI.2010.3.16
        const char *signature;                         // IFF (1&amp;lt;&amp;lt;30)
    } *descriptor;
    // imported variables
};

NSString* decode(NSString* code);
NSArray* choose_inner(const char * classname);
char * protection_bits_to_rwx (vm_prot_t p);
const char * unparse_inheritance (vm_inherit_t i);
char * behavior_to_text (vm_behavior_t  b);

NSString* decode(NSString* code){
    NSDictionary * encodeMap = @{
                                 @&quot;c&quot;: @&quot;char&quot;,
                                 @&quot;i&quot;: @&quot;int&quot;,
                                 @&quot;s&quot;: @&quot;short&quot;,
                                 @&quot;l&quot;: @&quot;long&quot;,
                                 @&quot;q&quot;: @&quot;long long&quot;,
                                 
                                 @&quot;C&quot;: @&quot;unsigned char&quot;,
                                 @&quot;I&quot;: @&quot;unsigned int&quot;,
                                 @&quot;S&quot;: @&quot;unsigned short&quot;,
                                 @&quot;L&quot;: @&quot;unsigned long&quot;,
                                 @&quot;Q&quot;: @&quot;unsigned long long&quot;,
                                 
                                 @&quot;f&quot;: @&quot;float&quot;,
                                 @&quot;d&quot;: @&quot;double&quot;,
                                 @&quot;B&quot;: @&quot;bool&quot;,
                                 @&quot;v&quot;: @&quot;void&quot;,
                                 @&quot;*&quot;: @&quot;char *&quot;,
                                 @&quot;@&quot;: @&quot;id&quot;,
                                 @&quot;#&quot;: @&quot;Class&quot;,
                                 @&quot;:&quot;: @&quot;SEL&quot;
                                 };
    
    if(encodeMap[code]){
        return encodeMap[code];
    }else if([code characterAtIndex:0] == '@'){
        if([code characterAtIndex:1] == '?'){
            return code;
        }else if([code characterAtIndex:2] == '&amp;lt;'){
            return [NSString stringWithFormat:@&quot;id%@&quot;, [[code substringWithRange:NSMakeRange(2, code.length-3)] stringByReplacingOccurrencesOfString:@&quot;&amp;gt;&amp;lt;&quot; withString:@&quot;, &quot;]];
        }else{
            return [NSString stringWithFormat:@&quot;%@ *&quot;, [code substringWithRange:NSMakeRange(2, code.length-3)]];
        }
    }else if([code characterAtIndex:0] == '^'){
        return [NSString stringWithFormat:@&quot;%@ *&quot;, decode([code substringFromIndex:1])];
    }
    return code;
}

NSString* pvc(){
    return [[[UIWindow performSelector:@selector(keyWindow)] performSelector:@selector(rootViewController)] performSelector:@selector(_printHierarchy)];
}

NSString* pviews(){
    return [[[UIApplication sharedApplication] keyWindow] performSelector:@selector(recursiveDescription)];
}

NSString* pactions(vm_address_t address){
    NSMutableString* result = [NSMutableString new];
    UIControl* control = (__bridge UIControl*)(void*)address;
    NSArray* targets = [[control allTargets] allObjects];
    for (id item in targets) {
        NSArray* actions = [control actionsForTarget:item forControlEvent:0];
        [result appendFormat:@&quot;&amp;lt;%s: 0x%lx&amp;gt;: %@\n&quot;, object_getClassName(item), (unsigned long)item, [actions componentsJoinedByString:@&quot;,&quot;]];
    }
    return result;
}

NSString* pblock(vm_address_t address){
    struct Block_literal_1 real = *((struct Block_literal_1 *)(void*)address);
    NSMutableDictionary *dict = [NSMutableDictionary dictionary];
    [dict setObject:[NSNumber numberWithLong:(long)real.invoke] forKey:@&quot;invoke&quot;];
    if (real.flags &amp;amp; BLOCK_HAS_SIGNATURE) {
        char *signature;
        if (real.flags &amp;amp; BLOCK_HAS_COPY_DISPOSE) {
            signature = (char *)(real.descriptor)-&amp;gt;signature;
        } else {
            signature = (char *)(real.descriptor)-&amp;gt;copy_helper;
        }
        
        NSMethodSignature *sig = [NSMethodSignature signatureWithObjCTypes:signature];
        NSMutableArray *types = [NSMutableArray array];
        
        [types addObject:[NSString stringWithUTF8String:(char *)[sig methodReturnType]]];
        
        for (NSUInteger i = 0; i &amp;lt; sig.numberOfArguments; i++) {
            char *type = (char *)[sig getArgumentTypeAtIndex:i];
            [types addObject:[NSString stringWithUTF8String:type]];
        }
        
        [dict setObject:types forKey:@&quot;signature&quot;];
    }
    
    NSMutableArray* sigArr = dict[@&quot;signature&quot;];
    
    if(!sigArr){
        return [NSString stringWithFormat:@&quot;Imp: 0x%lx&quot;, [dict[@&quot;invoke&quot;] longValue]];
    }else{
        NSMutableString* sig = [NSMutableString stringWithFormat:@&quot;%@ ^(&quot;, decode(sigArr[0])];
        for (int i = 2; i &amp;lt; sigArr.count; i++) {
            if(i == sigArr.count - 1){
                [sig appendFormat:@&quot;%@&quot;, decode(sigArr[i])];
            }else{
                [sig appendFormat:@&quot;%@ ,&quot;, decode(sigArr[i])];
            }
        }
        [sig appendString:@&quot;);&quot;];
        return [NSString stringWithFormat:@&quot;Imp: 0x%lx    Signature: %s&quot;, [dict[@&quot;invoke&quot;] longValue], [sig UTF8String]];
    }
}

struct CYChoice {
    std::set&amp;lt;Class&amp;gt; query_;
    std::set&amp;lt;id&amp;gt; results_;
};

struct CYObjectStruct {
    Class isa_;
};

static void choose_(task_t task, void *baton, unsigned type, vm_range_t *ranges, unsigned count) {
    CYChoice *choice(reinterpret_cast&amp;lt;CYChoice *&amp;gt;(baton));
    
    for (unsigned i(0); i != count; ++i) {
        vm_range_t &amp;amp;range(ranges[i]);
        void *data(reinterpret_cast&amp;lt;void *&amp;gt;(range.address));
        size_t size(range.size);
        
        if (size &amp;lt; sizeof(CYObjectStruct))
            continue;
        
        uintptr_t *pointers(reinterpret_cast&amp;lt;uintptr_t *&amp;gt;(data));
#ifdef __arm64__
        Class isa = (__bridge Class)((void *)(pointers[0] &amp;amp; 0x1fffffff8));
#else
        Class isa =(__bridge Class)(void *)pointers[0];
#endif
        std::set&amp;lt;Class&amp;gt;::const_iterator result(choice-&amp;gt;query_.find(isa));
        if (result == choice-&amp;gt;query_.end())
            continue;
        
        size_t needed(class_getInstanceSize(*result));
        // XXX: if (size &amp;lt; needed)
        
        size_t boundary(496);
#ifdef __LP64__
        boundary *= 2;
#endif
        if ((needed &amp;lt;= boundary &amp;amp;&amp;amp; (needed + 15) / 16 * 16 != size) || (needed &amp;gt; boundary &amp;amp;&amp;amp; (needed + 511) / 512 * 512 != size))
            continue;
        choice-&amp;gt;results_.insert((__bridge id)(data));
    }
}

static Class *CYCopyClassList(size_t &amp;amp;size) {
    size = objc_getClassList(NULL, 0);
    Class *data(reinterpret_cast&amp;lt;Class *&amp;gt;(malloc(sizeof(Class) * size)));
    
    for (;;) {
        size_t writ(objc_getClassList(data, (int)size));
        if (writ &amp;lt;= size) {
            size = writ;
            return data;
        }
        
        Class *copy(reinterpret_cast&amp;lt;Class *&amp;gt;(realloc(data, sizeof(Class) * writ)));
        if (copy == NULL) {
            free(data);
            return NULL;
        }
        
        data = copy;
        size = writ;
    }
}

static kern_return_t CYReadMemory(task_t task, vm_address_t address, vm_size_t size, void **data) {
    *data = reinterpret_cast&amp;lt;void *&amp;gt;(address);
    return KERN_SUCCESS;
}

NSArray* choose_inner(const char * classname){
    
    Class _class = NSClassFromString([NSString stringWithUTF8String:classname]);
    
    vm_address_t *zones = NULL;
    unsigned size = 0;
    //获取所有的zone信息  堆上的区域
    kern_return_t error = malloc_get_all_zones(mach_task_self(), &amp;amp;CYReadMemory, &amp;amp;zones, &amp;amp;size);
    assert(error == KERN_SUCCESS);
    
    size_t number;
    Class *classes(CYCopyClassList(number));
    assert(classes != NULL);
    
    CYChoice choice;
    
    //找到目标Class
    for (size_t i(0); i != number; ++i)
        for (Class current(classes[i]); current != Nil; current = class_getSuperclass(current))
            if (current == _class) {
                choice.query_.insert(classes[i]);
                break;
            }
    
    for (unsigned i(0); i != size; ++i) {
        const malloc_zone_t *zone(reinterpret_cast&amp;lt;const malloc_zone_t *&amp;gt;(zones[i]));
        if (zone == NULL || zone-&amp;gt;introspect == NULL)
            continue;
        
        //枚举堆上的对象
        zone-&amp;gt;introspect-&amp;gt;enumerator(mach_task_self(), &amp;amp;choice, MALLOC_PTR_IN_USE_RANGE_TYPE, zones[i], &amp;amp;CYReadMemory, &amp;amp;choose_);
    }
    NSMutableArray * result = [[NSMutableArray alloc] init];
    
    for (auto iter = choice.results_.begin(); iter != choice.results_.end(); iter++) {
        [result addObject:(id)*iter];
    }
    return result;
}

NSString* choose(const char* classname){
    NSMutableString* result = [NSMutableString new];
    NSArray* results = choose_inner(classname);
    [result appendFormat:@&quot;Find %lu instance objects in memory!\n&quot; , (unsigned long)results.count];
    for (id item in results) {
        [result appendFormat:@&quot;&amp;lt;%s: 0x%llx&amp;gt;\n&quot;, object_getClassName(item), (long long)item];
    }
    return result;
}

NSString* methods(const char * classname){
    return [objc_getClass(classname) performSelector:@selector(_shortMethodDescription)];
}

NSString* ivars(vm_address_t address){
    id target = (__bridge id)(void*)address;
    return [target performSelector:@selector(_ivarDescription)];
}

char * protection_bits_to_rwx (vm_prot_t p){
    static char returned[4];
    
    returned[0] = (p &amp;amp; VM_PROT_READ    ? 'r' : '-');
    returned[1] = (p &amp;amp; VM_PROT_WRITE   ? 'w' : '-');
    returned[2] = (p &amp;amp; VM_PROT_EXECUTE ? 'x' : '-');
    returned[3] = '\0';
    
    // memory leak here. No biggy
    return (strdup(returned));
}

const char * unparse_inheritance (vm_inherit_t i){
    switch (i){
        case VM_INHERIT_SHARE:
            return &quot;share&quot;;
        case VM_INHERIT_COPY:
            return &quot;copy&quot;;
        case VM_INHERIT_NONE:
            return &quot;none&quot;;
        default:
            return &quot;???&quot;;
    }
}

char * behavior_to_text (vm_behavior_t  b){
    switch (b){
        case VM_BEHAVIOR_DEFAULT: return((char*)&quot;default&quot;);
        case VM_BEHAVIOR_RANDOM:  return((char*)&quot;random&quot;);
        case VM_BEHAVIOR_SEQUENTIAL: return((char*)&quot;fwd-seq&quot;);
        case VM_BEHAVIOR_RSEQNTL: return((char*)&quot;rev-seq&quot;);
        case VM_BEHAVIOR_WILLNEED: return((char*)&quot;will-need&quot;);
        case VM_BEHAVIOR_DONTNEED: return((char*)&quot;will-need&quot;);
        case VM_BEHAVIOR_FREE: return((char*)&quot;free-nowb&quot;);
        case VM_BEHAVIOR_ZERO_WIRED_PAGES: return((char*)&quot;zero-wire&quot;);
        case VM_BEHAVIOR_REUSABLE: return((char*)&quot;reusable&quot;);
        case VM_BEHAVIOR_REUSE: return((char*)&quot;reuse&quot;);
        case VM_BEHAVIOR_CAN_REUSE: return((char*)&quot;canreuse&quot;);
        default: return ((char*)&quot;?&quot;);
    }
}

__BEGIN_DECLS

extern kern_return_t mach_vm_region
(
 vm_map_t target_task,
 mach_vm_address_t *address,
 mach_vm_size_t *size,
 vm_region_flavor_t flavor,
 vm_region_info_t info,
 mach_msg_type_number_t *infoCnt,
 mach_port_t *object_name
 );

__END_DECLS

NSString* vmmap(){
    vm_region_basic_info_data_t info, prev_info;
    mach_vm_address_t address = 1, prev_address;
    mach_vm_size_t size, prev_size;
    mach_msg_type_number_t count = VM_REGION_BASIC_INFO_COUNT_64;
    mach_port_t object_name;
    
    int nsubregions = 0;
    kern_return_t kr = mach_vm_region(mach_task_self(), &amp;amp;address, &amp;amp;size, VM_REGION_BASIC_INFO, (vm_region_info_t)&amp;amp;info, &amp;amp;count, &amp;amp;object_name);
    
    NSMutableString* result = [[NSMutableString alloc] init];
    
    if(kr != KERN_SUCCESS){
        [result appendFormat:@&quot;mach_vm_region: Error %d - %s&quot;, kr, mach_error_string(kr)];
        return [result copy];
    }
    
    //保存之前查到的info
    memcpy (&amp;amp;prev_info, &amp;amp;info, sizeof (vm_region_basic_info_data_t));
    prev_address = address;
    prev_size = size;
    nsubregions = 1;
    
    while (true) {
        int print = 0, done = 0;
        
        address = prev_address + prev_size;
        
        if (address == 0){
            print = done = 1;
        }
        
        if (!done){
            kr = mach_vm_region (mach_task_self(), &amp;amp;address, &amp;amp;size, VM_REGION_BASIC_INFO, (vm_region_info_t)&amp;amp;info, &amp;amp;count, &amp;amp;object_name);
            
            if (kr != KERN_SUCCESS){
                [result appendFormat:@&quot;mach_vm_region failed for address %llu - Error: %x\n&quot;,address, (kr)];
                print = done = 1;
            }
        }
        
        //等于才是连续的内存，不等于才打印
        if (address != prev_address + prev_size)
            print = 1;
        
        //或者权限信息改变了也打印
        if ((info.protection != prev_info.protection)
            || (info.max_protection != prev_info.max_protection)
            || (info.inheritance != prev_info.inheritance)
            || (info.shared != prev_info.reserved)
            || (info.reserved != prev_info.reserved))
            print = 1;
        
        if (print){
            char *print_size_unit = NULL;
            
            mach_vm_size_t print_size = prev_size;
            if (print_size &amp;gt; 1024) { print_size /= 1024; print_size_unit = (char*)&quot;K&quot;; }
            if (print_size &amp;gt; 1024) { print_size /= 1024; print_size_unit = (char*)&quot;M&quot;; }
            if (print_size &amp;gt; 1024) { print_size /= 1024; print_size_unit = (char*)&quot;G&quot;; }
            
            [result appendFormat:@&quot; %p-%p [%llu%s](%s/%s; %s, %s, %s) %s&quot;,
             (void*)(prev_address),
             (void*)(prev_address + prev_size),
             print_size,
             print_size_unit,
             protection_bits_to_rwx (prev_info.protection),
             protection_bits_to_rwx (prev_info.max_protection),
             unparse_inheritance (prev_info.inheritance),
             prev_info.shared ? &quot;shared&quot; : &quot;private&quot;,
             prev_info.reserved ? &quot;reserved&quot; : &quot;not-reserved&quot;,
             behavior_to_text (prev_info.behavior)];
            
            if (nsubregions &amp;gt; 1)
                [result appendFormat:@&quot; (%d sub-regions)&quot;, nsubregions];
            
            [result appendFormat:@&quot;\n&quot;];
            prev_address = address;
            prev_size = size;
            memcpy (&amp;amp;prev_info, &amp;amp;info, sizeof (vm_region_basic_info_data_t));
            nsubregions = 1;
        }else{
            prev_size += size;
            nsubregions++;
        }
        
        if (done)
            break;
    }
    return [result copy];
}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Fri, 30 Apr 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/04/iOS%E6%B7%BB%E5%8A%A0%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/04/iOS%E6%B7%BB%E5%8A%A0%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>iOS中MVC设计模式</title>
        <description>&lt;p&gt;在组织大型项目的代码文件时，我们常用MVC的思想。MVC的概念讲起来非常简单，就和对象（object）一样。但是理解和应用起来却非常困难。今天我们就简单总结一下MVC设计理念。&lt;/p&gt;

&lt;p&gt;MVC(Model View Controller)模型(model)－视图(view)－控制器(controller)：&lt;br /&gt;
MVC本来是存在于Desktop程序中的，M是指数据模型，V是指用户界面，C则是控制器。使用MVC是将M和V的实现代码分离，从而使同一个程序可以使用不同的表现形式。比如一批统计数据你可以分别用柱状图、饼图来表示。C存在的目的则是确保M和V的同步，一旦M改变，V应该同步更新，从例子可以看出MVC就是Observer设计模式的一个特例。&lt;/p&gt;

&lt;p&gt;MVC是一个设计模式，它强制性的使&lt;a href=&quot;http://baike.baidu.com/view/330120.htm&quot;&gt;应用程序&lt;/a&gt;的输入、处理和输出分开。使用MVC应用程序被分成三个核心部件：模型、视图、控制器。它们各自处理自己的任务。分层概念&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（一）模型对象&lt;/strong&gt;&lt;br /&gt;
模型对象封装了应用程序的数据，并定义操控和处理该数据的逻辑和运算。例如，模型对象可能是表示游戏中的角色或地址簿中的联系人。用户在视图层中所进行的创建或修改数据的操作，通过控制器对象传达出去，最终会创建或更新模型对象。模型对象更改时（例如通过网络连接接收到新数据），它通知控制器对象，控制器对象更新相应的视图对象。在MVC的三个部件中，模型拥有最多的处理任务。例如它可能用象EJBs和ColdFusion Components这样的构件对象来处理数据库。被模型返回的数据是中立的，就是说模型与数据格式无关，这样一个模型能为多个视图提供数据。由于应用于模型的代码只需写一次就可以被多个视图重用，所以减少了代码的重复性。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（二）视图对象&lt;/strong&gt;&lt;br /&gt;
视图对象是应用程序中用户可以看见的对象。视图对象知道如何将自己绘制出来，并可能对用户的操作作出响应。视图对象的主要目的，就是显示来自应用程序模型对象的数据，并使该数据可被编辑。尽管如此，在 MVC 应用程序中，视图对象通常与模型对象分离。在iOS应用程序开发中，所有的控件、窗口等都继承自UIView，对应MVC中的V。UIView及其子类主要负责UI的实现，而UIView所产生的事件都可以采用委托的方式，交给UIViewController实现。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（三）控制器对象&lt;/strong&gt;&lt;br /&gt;
在应用程序的一个或多个视图对象和一个或多个模型对象之间，控制器对象充当媒介。控制器对象因此是同步管道程序，通过它，视图对象了解模型对象的更改，反之亦然。控制器对象还可以为应用程序执行设置和协调任务，并管理其他对象的生命周期。&lt;/p&gt;

&lt;p&gt;控制器对象解释在视图对象中进行的用户操作，并将新的或更改过的数据传达给模型对象。模型对象更改时，一个控制器对象会将新的模型数据传达给视图对象，以便视图对象可以显示它。&lt;/p&gt;

&lt;p&gt;为什么要使用 MVC&lt;br /&gt;
　首先，最重要的一点是多个视图能共享一个模型，现在需要用越来越多的方式来访问你的应用程序。对此，其中一个解决之道是使用MVC，无论你的用户想要Flash界面或是 WAP 界面；用一个模型就能处理它们。由于你已经将数据和业务规则从表示层分开，所以你可以最大化的重用你的代码了。&lt;br /&gt;
　　由于模型返回的数据没有进行格式化，所以同样的构件能被不同界面使用。例如，很多数据可能用HTML来表示，但是它们也有可能要用Adobe Flash和WAP来表示。模型也有状态管理和数据持久性处理的功能，例如，基于会话的购物车和电子商务过程也能被Flash网站或者无线联网的应用程序所重用。&lt;br /&gt;
　　因为模型是自包含的，并且与控制器和视图相分离，所以很容易改变你的应用程序的数据层和业务规则。如果你想把你的数据库从MySQL移植到Oracle，或者改变你的基于RDBMS数据源到LDAP，只需改变你的模型即可。一旦你正确的实现了模型，不管你的数据来自数据库或是LDAP服务器，视图将会正确的显示它们。由于运用MVC的应用程序的三个部件是相互独立，改变其中一个不会影响其它两个，所以依据这种设计思想你能构造良好的松耦合的构件。&lt;br /&gt;
　　对我来说，控制器也提供了一个好处，就是可以使用控制器来联接不同的模型和视图去完成用户的需求，这样控制器可以为构造应用程序提供强有力的手段。给定一些可重用的模型和视图，控制器可以根据用户的需求选择模型进行处理，然后选择视图将处理结果显示给用户。&lt;br /&gt;
&lt;strong&gt;MVC的优点&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;（一）、低耦合性&lt;/strong&gt;&lt;br /&gt;
　　视图层和业务层分离，这样就允许更改视图层代码而不用重新编译模型和控制器代码，同样，一个应用的业务流程或者业务规则的改变只需要改动MVC的模型层即可。因为模型与控制器和视图相分离，所以很容易改变应用程序的数据层和业务规则。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（二）、高重用性和可适用性&lt;/strong&gt;&lt;br /&gt;
　　随着技术的不断进步，现在需要用越来越多的方式来访问应用程序。MVC模式允许你使用各种不同样式的视图来访问同一个服务器端的代码。它包括任何WEB（HTTP）浏览器或者无线浏览器（wap），比如，用户可以通过电脑也可通过手机来订购某样产品，虽然订购的方式不一样，但处理订购产品的方式是一样的。由于模型返回的数据没有进行格式化，所以同样的构件能被不同的界面使用。例如，很多数据可能用HTML来表示，但是也有可能用WAP来表示，而这些表示所需要的命令是改变视图层的实现方式，而控制层和模型层无需做任何改变。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（三）、较低的生命周期成本&lt;/strong&gt;&lt;br /&gt;
　　MVC使开发和维护用户接口的技术含量降低。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（四）、可维护性&lt;/strong&gt;&lt;br /&gt;
　　分离视图层和业务逻辑层也使得应用更易于维护和修改。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（五）、有利于软件工程化管理&lt;/strong&gt;&lt;br /&gt;
　　由于不同的层各司其职，每一层不同的应用具有某些相同的特征，有利于通过工程化、工具化管理程序代码。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;MVC的缺点：&lt;/strong&gt;&lt;br /&gt;
　　MVC的缺点是由于它没有明确的定义，所以完全理解MVC并不是很容易。使用MVC需要精心的计划，由于它的内部原理比较复杂，所以需要花费一些时间去思考。&lt;br /&gt;
　　你将不得不花费相当可观的时间去考虑如何将MVC运用到你的应用程序，同时由于模型和视图要严格的分离，这样也给调试应用程序带来了一定的困难。每个构件在使用之前都需要经过彻底的测试。一旦你的构件经过了测试，你就可以毫无顾忌的重用它们了。&lt;br /&gt;
　　根据开发者经验，由于开发者将一个应用程序分成了三个部件，所以使用MVC同时也意味着你将要管理比以前更多的文件，这一点是显而易见的。这样好像我们的工作量增加了，但是请记住这比起它所能带给我们的好处是不值一提。&lt;br /&gt;
　　MVC并不适合小型甚至中等规模的应用程序，花费大量时间将MVC应用到规模并不是很大的应用程序通常会得不偿失。&lt;br /&gt;
　　MVC设计模式是一个很好创建软件的途径，它所提倡的一些原则，像内容和显示互相分离可能比较好理解。但是如果你要隔离模型、视图和控制器的构件，你可能需要重新思考你的应用程序，尤其是应用程序的构架方面。如果你肯接受MVC，并且有能力应付它所带来的额外的工作和复杂性，MVC将会使你的软件在健壮性，代码重用和结构方面上一个新的台阶。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;IOS MVC设计模式：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/iOS/MVC/011901561465049.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;图中有几条线把这三部分划分开，有黄线，虚线，和白色的实线。我们把它们想象成路标。你可以看到，在M和V之间有两条黄线，这表示什么呢？它意味着你不能 穿越这黄线，任何一个方向都不行，即M和V完全分离。在图的上部，你可以看到白色的虚线，它意味着你可以自由的穿越它，只要是安全的。那白色的实线呢？它代表你可以穿越，但你必须要买票，或者交点过路费。&lt;/p&gt;

&lt;p&gt;首先， 我们来看C和M之间的绿色箭头，这箭头的方向就代表着“发起对话”的方向，也就是说，发起对话的是C，而做出回答的是M。C可以问M各种各样的问题，但M 只是回答C的问题或要求，它不可以主动的向C要求什么。还记得虚线是畅通无阻的意思吧，所以，C知道M的所有的事情,如果用代码来说明这件事情，就是 说，C可以导入M的头文件或是M的接口（API）。因为C可以通过M的API，所以它就可以肆无忌惮的向M要求这要求那了。&lt;/p&gt;

&lt;p&gt;我们再来看看另外的一个绿色箭头，它是在C和V之间，和前一个绿色箭头的意义一样，它代表C可以直接地向V进行交流。你可以想想，C要把V放到屏幕 上，并设置V的属性，告诉它们什么时候从屏幕上消失，把它们分成组等等。如果C不能自由的向V发号施令的话，程序的显示将会多么的困难,所以，C可以毫无 限制地向V说话。&lt;/p&gt;

&lt;p&gt;可能你已经注意到了，这个箭头上还有outlet(输出口)，outlet可以看作是从C指向V的指针，它在C中被定义。outlet给我们提供了很大的 方便，它使我们在C的内部就可以轻松准确地向V施令。C可以拥有很多的outlet，可以不止一个，这也使它可以更高效的和V进行交流。&lt;/p&gt;

&lt;p&gt;那M和V之间可以交流么？还记得黄线的意思么？完全不可以通过，所以我们是不允许M和V进行交流的。这是因为我们不希望这三部分之间有过多的交流，你想想，假如V在显示时出现了问题，比如有一个图形没有显示出来，我们就要去查找错误，因为C可以和V交流，M也可以和V交流的话，我们就要去检查两个部分。 相反的，只有C可以和V交流的话，在出错时，我们就只需要去C那里查找原因，这样查找错误不就很是简单了么？所以，我们不允许M和V之间有直接的联系，这 也是在它们两之间有两根黄线的原因。 总结下来也就是以下三点：&lt;/p&gt;

&lt;p&gt;（1）、Model和View永远不能相互通信，只能通过Controller传递。&lt;/p&gt;

&lt;p&gt;（2）、Controller可以直接与Model对话（读写调用Model），Model通过Notification和KVO机制与Controller间接通信。&lt;/p&gt;

&lt;p&gt;（3）、Controller可以直接与View对话，通过outlet,直接操作View,outlet直接对应到View中的控件,View通过action向Controller报告事件的发生(如用户Touch我了)。Controller是View的直接数据源（数据很可能是Controller从Model中取得并经过加工了）。Controller是View的代理（delegate),以同步View与Controller。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;我们接下来讨论V是如何向C发送信息的。V对C的交流有三种不同的方式：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第一种我们称为目标操作(target-action)。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;它是这样工作的，C会在自己的内部“悬挂”一个目标(target)，如图中的红白相间的 靶子，对应的，它还会分发一个操作(action，如图中的黄色箭头)给将要和它交流的视图对象(可能是屏幕上的一个按钮)，当按钮被按时，action 就会被发送给与之对应的target，这样V就可以和C交流了。但是在这种情况下，V只是知道发送action给对应的target,它并不知道C中的 类，也不知道它到底发送了什么。target-action是我们经常使用的方法。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第二种方式我们叫做委托(delegate)。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;有时候，V需要和C进行同步，你知道，用户交互不仅仅是什么按按钮，划滑块，还有很多种形式。好了， 让我们来看看图中的delegate黄色箭头，你发现箭头上又分出了四个小箭头：should，did，will，还有一个没标注的。绝大部分的 delegate信息都是should，will，did这三种形式。和英文意思相对应，should代表视图对象将询问C中的某个对象“我应该这么做 么？”，举个例子，有一个web视图，有人点击了一个链接，web视图就要问“我应该打开这个链接么？这样做安全么？”。这就是should信息。那 will和did呢？will就是“我将要做这件事了”，did就是“我已经做了这件事”。C把自己设置为V的委托(delegate),它让V知道：如 果V想知道更多的关于将如何显示的信息的话，就向C发送delegate信息。通过接受V发过来的delegate信息，C就会做出相应的协调和处理。还 有一点，每个V只能有一个delegate。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;第三种方式就是数据源(datasource)，&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;V不能拥有它所要显示的数据，记住这点非常重要。V希望别人帮助它管理将要显示的数据，当 它需要数据时，它就会请求别人的帮助,把需要的数据给它。再者，iphone的屏幕很小，它不能显示包含大量信息的视图。看图中的datasource箭 头，和delegate类似，V会发送cout，data at信息给C来请求数据。&lt;/p&gt;

&lt;p&gt;对于不同的UIView，有相应的UIViewController，对应MVC中的C。例如在iOS上常用的UITableView，它所对应的Controller就是UITableViewController。&lt;/p&gt;

</description>
        <pubDate>Fri, 30 Apr 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/04/iOS%E4%B8%ADMVC%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/04/iOS%E4%B8%ADMVC%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</guid>
        
        <category>iOS</category>
        
        
      </item>
    
      <item>
        <title>高级Bash脚本编程指南</title>
        <description>&lt;p&gt;《高级Bash脚本编程指南》Revision 10中文版&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.linuxplus.org/kb/&quot;&gt;在线阅读链接&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://tldp.org/LDP/abs/html/&quot;&gt;英文版&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://linuxstory.gitbook.io/advanced-bash-scripting-guide-in-chinese/&quot;&gt;gitbook地址&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.tutorialspoint.com/unix/unix-shell.htm&quot;&gt;Unix Shell Programming&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bash.cyberciti.biz/guide/Main_Page&quot;&gt;Linux Shell Scripting Tutorial - A Beginner’s handbook&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 26 Apr 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/04/%E9%AB%98%E7%BA%A7Bash%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/04/%E9%AB%98%E7%BA%A7Bash%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/</guid>
        
        <category>shell</category>
        
        
      </item>
    
      <item>
        <title>shell编程之wc命令</title>
        <description>&lt;p&gt;Linux wc命令用于计算字数。&lt;/p&gt;

&lt;p&gt;利用wc指令我们可以计算文件的Byte数、字数、或是列数，若不指定文件名称、或是所给予的文件名为”-“，则wc指令会从标准输入设备读取数据。&lt;/p&gt;

&lt;h1 id=&quot;语法&quot;&gt;语法&lt;/h1&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wc [-clw][--help][--version][文件...]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;参数&quot;&gt;参数：&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;-c或–bytes或–chars 只显示Bytes数。&lt;/li&gt;
  &lt;li&gt;-l或–lines 显示行数。&lt;/li&gt;
  &lt;li&gt;-w或–words 只显示字数。&lt;/li&gt;
  &lt;li&gt;–help 在线帮助。&lt;/li&gt;
  &lt;li&gt;–version 显示版本信息。
    &lt;h2 id=&quot;实例&quot;&gt;实例&lt;/h2&gt;
    &lt;p&gt;在默认的情况下，wc将计算指定文件的行数、字数，以及字节数。使用的命令为：&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wc testfile 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;先查看testfile文件的内容，可以看到：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cat testfile  
Linux networks are becoming more and more common, but scurity is often an overlooked  
issue. Unfortunately, in today’s environment all networks are potential hacker targets,  
fro0m tp-secret military research networks to small home LANs.  
Linux Network Securty focuses on securing Linux in a networked environment, where the  
security of the entire network needs to be considered rather than just isolated machines.  
It uses a mix of theory and practicl techniques to teach administrators how to install and  
use security applications, as well as how the applcations work and why they are necesary. 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;使用 wc统计，结果如下：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ wc testfile           # testfile文件的统计信息  
3 92 598 testfile       # testfile文件的行数为3、单词数92、字节数598 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;其中，3 个数字分别表示testfile文件的行数、单词数，以及该文件的字节数。
如果想同时统计多个文件的信息，例如同时统计testfile、testfile_1、testfile_2，可使用如下命令：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wc testfile testfile_1 testfile_2   #统计三个文件的信息 
输出结果如下：

$ wc testfile testfile_1 testfile_2  #统计三个文件的信息  
3 92 598 testfile                    #第一个文件行数为3、单词数92、字节数598  
9 18 78 testfile_1                   #第二个文件的行数为9、单词数18、字节数78  
3 6 32 testfile_2                    #第三个文件的行数为3、单词数6、字节数32  
15 116 708 总用量                    #三个文件总共的行数为15、单词数116、字节数708 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 26 Apr 2021 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2021/04/shell%E7%BC%96%E7%A8%8B%E4%B9%8Bwc%E5%91%BD%E4%BB%A4/</link>
        <guid isPermaLink="true">http://localhost:4000/2021/04/shell%E7%BC%96%E7%A8%8B%E4%B9%8Bwc%E5%91%BD%E4%BB%A4/</guid>
        
        <category>shell</category>
        
        
      </item>
    
  </channel>
</rss>
