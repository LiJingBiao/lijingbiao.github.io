<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>02_SHELL编程之变量定义</title>
  <meta name="description" content="SHELL编程模块课程目标">
  <meta name="author" content="leopardpan">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="02_SHELL编程之变量定义">
  <meta name="twitter:description" content="SHELL编程模块课程目标">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="02_SHELL编程之变量定义">
  <meta property="og:description" content="SHELL编程模块课程目标">
  
  <link rel="icon" type="image/png" href="/images/favicon.png" />
  <link href="/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2018/04/02_SHELL/">
  <link rel="alternate" type="application/rss+xml" title="LiJingBiao" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />

<!-- 站点统计 -->
  <script 
  async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>  

<!-- 百度统计 -->
  
  <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?8ba1c6be0953b6f9c2ba38e57f615421";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
  </script>
  

<!-- google 统计 -->
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-84134159-3', 'auto');
      ga('send', 'pageview');
  </script>
  

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9005224472374751",
    enable_page_level_ads: true
  });
</script>

</head>


  <body>

    <span class="mobile btn-mobile-menu">        
      <div class="nav_container">
         <nav class="nav-menu-item" style = "float:right">
            <i class="nav-menu-item">
              <a href="/#blog" title="" class="blog-button">  博客主页
              </a>
            </i>
            
                <i class="nav-menu-item">

                  <a href="/archive" title="archive" class="btn-mobile-menu__icon">
                      所有文章
                  </a>
                </i>
            
                <i class="nav-menu-item">

                  <a href="/tags" title="tags" class="btn-mobile-menu__icon">
                      标签
                  </a>
                </i>
            
                <i class="nav-menu-item">

                  <a href="/about" title="about" class="btn-mobile-menu__icon">
                      关于我
                  </a>
                </i>
            
          </nav>
      </div>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <!-- 头像效果-start -->
        <div class="ih-item circle effect right_to_left">            
            <a href="/#blog" title="前往 LiJingBiao 的主页" class="blog-button">
                <div class="img"><img src="/images/avatar.jpg" alt="img"></div>
                <div class="info">
                    <div class="info-back">
                        <h2> 
                            
                                天道酬勤
                            
                        </h2>
                        <p>
                           
                                iOS / Ruby /Shell
                            
                        </p>
                    </div>
                </div>
            </a>
        </div>
        <!-- 头像效果-end -->
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for LiJingBiao" class="blog-button">LiJingBiao</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">个人站</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">欢迎来到我的个人站~</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        

        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">博客主页</a></li>
                
                  <li class="navigation__item"><a href="/archive" title="archive">所有文章</a></li>
                
                  <li class="navigation__item"><a href="/tags" title="tags">标签</a></li>
                
                  <li class="navigation__item"><a href="/about" title="about">关于我</a></li>
                
              </ul>
            </nav>
          </div>          
        </div>


        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-clear"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <head>
  <link rel="stylesheet" href="/css/post.css">
</head>

<article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title">02_SHELL编程之变量定义</h1>
    <div class="post-meta">
      <img src="/images/calendar.png" width="20px"/> 
      <time datetime="2018-04-19 00:00:00 +0800" itemprop="datePublished" class="post-meta__date date">2018-04-19</time>  

      <span id="busuanzi_container_page_pv"> | 阅读：<span id="busuanzi_value_page_pv"></span>次</span>
    </p>
    </div>
  </header>

  
    <h2 class="post-title">目录</h2>
    <ul>
  <li><a href="#shell编程模块课程目标">SHELL编程模块课程目标</a></li>
  <li><a href="#一shell介绍">一、SHELL介绍</a>
    <ul>
      <li><a href="#1-编程语言分类">1. 编程语言分类</a></li>
      <li><a href="#2-shell简介">2. shell简介</a></li>
      <li><a href="#3-shell脚本">3. shell脚本</a>
        <ul>
          <li><a href="#-什么是shell脚本">㈠ 什么是shell脚本？</a></li>
          <li><a href="#-什么时候用到脚本">㈡ 什么时候用到脚本?</a></li>
          <li><a href="#-shell脚本能干啥">㈢ shell脚本能干啥?</a></li>
          <li><a href="#-如何学习shell脚本">㈣ 如何学习shell脚本？</a></li>
          <li><a href="#-学习shell脚本的秘诀">㈤ 学习shell脚本的秘诀</a></li>
          <li><a href="#-shell脚本的基本写法">㈥ shell脚本的基本写法</a></li>
          <li><a href="#-shell脚本的执行方法">㈦ shell脚本的执行方法</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#二变量的定义">二、变量的定义</a>
    <ul>
      <li><a href="#1-变量是什么">1. 变量是什么？</a></li>
      <li><a href="#2-什么时候需要定义变量">2. 什么时候需要定义变量？</a></li>
      <li><a href="#3变量如何定义">3.变量如何定义？</a></li>
      <li><a href="#4-变量的定义规则">4. 变量的定义规则</a>
        <ul>
          <li><a href="#-变量名区分大小写">㈠ 变量名区分大小写</a></li>
          <li><a href="#-变量名不能有特殊符号">㈡ 变量名不能有特殊符号</a></li>
          <li><a href="#-变量名不能以数字开头">㈢ 变量名不能以数字开头</a></li>
          <li><a href="#-等号两边不能有任何空格">㈣ 等号两边不能有任何空格</a></li>
          <li><a href="#-变量名尽量做到见名知意">㈤ 变量名尽量做到见名知意</a></li>
        </ul>
      </li>
      <li><a href="#5-变量的定义方式有哪些">5. 变量的定义方式有哪些？</a>
        <ul>
          <li><a href="#-基本方式">㈠ 基本方式</a></li>
          <li><a href="#-命令执行结果赋值给变量">㈡ 命令执行结果赋值给变量</a></li>
          <li><a href="#-交互式定义变量read">㈢ 交互式定义变量(read)</a></li>
          <li><a href="#-定义有类型的变量declare">㈣ 定义有类型的变量(declare)</a></li>
        </ul>
      </li>
      <li><a href="#6-变量的分类">6. 变量的分类</a>
        <ul>
          <li><a href="#-本地变量">㈠ 本地变量</a></li>
          <li><a href="#-环境变量">㈡ 环境变量</a></li>
          <li><a href="#-全局变量">㈢ 全局变量</a></li>
          <li><a href="#-系统变量">㈣ 系统变量</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#三简单四则运算">三、简单四则运算</a>
    <ul>
      <li><a href="#1-四则运算符号">1. 四则运算符号</a></li>
      <li><a href="#2了解i和i">2.了解i++和++i</a></li>
    </ul>
  </li>
  <li><a href="#四扩展补充">四、扩展补充</a>
    <ul>
      <li><a href="#1-数组定义">1. 数组定义</a>
        <ul>
          <li><a href="#-数组分类">㈠ 数组分类</a></li>
          <li><a href="#-普通数组定义">㈡ 普通数组定义</a></li>
          <li><a href="#-数组的读取">㈢ 数组的读取</a></li>
          <li><a href="#-关联数组定义">㈣ 关联数组定义</a>
            <ul>
              <li><a href="#首先声明关联数组">①首先声明关联数组</a></li>
              <li><a href="#-数组赋值">② 数组赋值</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#2-其他变量定义">2. 其他变量定义</a></li>
    </ul>
  </li>
</ul>

  

  <section class="post">
    <h1 id="shell编程模块课程目标">SHELL编程模块课程目标</h1>

<ul>
  <li>
    <p>① Shell的基本语法结构</p>

    <p>如：变量定义、条件判断、循环语句(for、until、while)、分支语句、函数和数组等；</p>

    <p>② 基本正则表达式的运用;</p>

    <p>③ 文件处理三剑客：grep、sed、awk工具的使用；</p>

    <p>④ 使用shell脚本完成一些较复杂的任务，如：服务搭建、批量处理等。</p>

    <p><strong><em>说明：以上内容仅仅是基本要求，还有很多更深更难的语法需要扩充学习。</em></strong></p>
  </li>
  <li>
    <p><strong>本节目标</strong></p>

    <ul>
      <li>熟练掌握shell变量的定义和获取（重点）</li>
      <li>能够进行shell简单的四则运算</li>
    </ul>
  </li>
</ul>

<h1 id="一shell介绍">一、SHELL介绍</h1>

<p><strong>前言：</strong></p>

<p>计算机只能认识（识别）机器语言(0和1)，如（11000000 这种）。但是，我们的程序猿们不能直接去写01这样的代码，所以，要想将程序猿所开发的代码在计算机上运行，就必须找”人”（工具）来翻译成机器语言，这个”人”(工具)就是我们常常所说的<strong>编译器</strong>或者<strong>解释器</strong>。</p>

<p><img src="/编译和解释型语言区别.png" alt="编译和解释型语言区别" /></p>

<h2 id="1-编程语言分类">1. 编程语言分类</h2>

<ul>
  <li><strong>编译型语言：</strong></li>
</ul>

<p>​    程序在执行之前需要一个专门的编译过程，把程序编译成为机器语言文件，运行时不需要重新翻译，直接使用编译的结果就行了。程序执行效率高，依赖编译器，跨平台性差些。如C、C++</p>

<ul>
  <li><strong>解释型语言：</strong></li>
</ul>

<p>​    程序不需要编译，程序在运行时由<strong>解释器</strong>翻译成机器语言，每执行一次都要翻译一次。因此效率比较低。比如Python/JavaScript/ Perl /ruby/Shell等都是解释型语言。</p>

<p><img src="语言分类.png" alt="./语言分类" /></p>

<ul>
  <li><strong>总结</strong></li>
</ul>

<p>编译型语言比解释型语言速度较快，但是不如解释型语言跨平台性好。如果做底层开发或者大型应用程序或者操作系开发一般都用编译型语言；如果是一些服务器脚本及一些辅助的接口，对速度要求不高、对各个平台的兼容性有要求的话则一般都用解释型语言。</p>

<h2 id="2-shell简介">2. shell简介</h2>

<p><img src="/00_shell介绍.png" alt="00_shell介绍" /></p>

<p><strong>总结：</strong></p>

<ul>
  <li>shell就是人机交互的一个桥梁</li>
  <li>shell的种类</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nb">cat</span> /etc/shells 
/bin/sh                <span class="c1">#是bash的一个快捷方式</span>
/bin/bash            <span class="c1">#bash是大多数Linux默认的shell，包含的功能几乎可以涵盖shell所有的功能</span>
/sbin/nologin        <span class="c1">#表示非交互，不能登录操作系统</span>
/bin/dash            <span class="c1">#小巧，高效，功能相比少一些</span>

/bin/csh                <span class="c1">#具有C语言风格的一种shell，具有许多特性，但也有一些缺陷</span>
/bin/tcsh            <span class="c1">#是csh的增强版，完全兼容csh</span>
</code></pre></div></div>

<p><strong>思考：终端和shell有什么关系？</strong></p>

<p><img src="./01_shell介绍.png" alt="01_shell介绍" /></p>

<h2 id="3-shell脚本">3. shell脚本</h2>

<h3 id="-什么是shell脚本">㈠ 什么是shell脚本？</h3>

<ul>
  <li>一句话概括</li>
</ul>

<p>简单来说就是将需要执行的命令保存到文本中，按照顺序执行。它是解释型的，意味着不需要编译。</p>

<ul>
  <li>准确叙述</li>
</ul>

<p><strong>若干命令 + 脚本的基本格式 + 脚本特定语法 + 思想= shell脚本</strong></p>

<h3 id="-什么时候用到脚本">㈡ 什么时候用到脚本?</h3>

<p><strong>重复化</strong>、复杂化的工作，通过把工作的命令写成脚本，以后仅仅需要执行脚本就能完成这些工作。</p>

<h3 id="-shell脚本能干啥">㈢ shell脚本能干啥?</h3>

<p>①自动化软件部署    LAMP/LNMP/Tomcat…</p>

<p>②自动化管理        系统初始化脚本、批量更改主机密码、推送公钥…</p>

<p>③自动化分析处理     统计网站访问量</p>

<p>④自动化备份        数据库备份、日志转储…</p>

<p>⑤自动化监控脚本</p>

<h3 id="-如何学习shell脚本">㈣ 如何学习shell脚本？</h3>

<ol>
  <li>尽可能记忆更多的命令(记忆命令使用功能和场景)</li>
  <li>掌握脚本的标准的格式（指定魔法字节、使用标准的执行方式运行脚本）</li>
  <li>必须<strong>熟悉掌握</strong>脚本的基本语法（重点)</li>
</ol>

<h3 id="-学习shell脚本的秘诀">㈤ 学习shell脚本的秘诀</h3>

<p>多看（看懂）——&gt;模仿（多练）——&gt;多思考（多写）</p>

<h3 id="-shell脚本的基本写法">㈥ shell脚本的基本写法</h3>

<p>1）<strong>脚本第一行</strong>，魔法字符<strong>#!</strong>指定解释器【必写】</p>

<p><code class="highlighter-rouge"><span class="c">#!/bin/bash</span></code>  表示以下内容使用bash解释器解析</p>

<p><strong>注意：</strong>
如果直接将解释器路径写死在脚本里，可能在某些系统就会存在找不到解释器的兼容性问题，所以可以使用:<strong><code class="highlighter-rouge">#!/bin/env 解释器</code></strong>  <strong><code class="highlighter-rouge"><span class="c">#!/bin/env bash</span></code></strong></p>

<p>2）<strong>脚本第二部分</strong>，注释(#号)说明，对脚本的基本信息进行描述【可选】</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/bin/env bash</span>

<span class="c1"># 以下内容是对脚本的基本信息的描述</span>
<span class="c1"># Name: 名字</span>
<span class="c1"># Desc:描述describe</span>
<span class="c1"># Path:存放路径</span>
<span class="c1"># Usage:用法</span>
<span class="c1"># Update:更新时间</span>

<span class="c1">#下面就是脚本的具体内容</span>
commands
...
</code></pre></div></div>

<p>3）<strong>脚本第三部分</strong>，脚本要实现的具体代码内容</p>

<h3 id="-shell脚本的执行方法">㈦ shell脚本的执行方法</h3>

<ul>
  <li>标准脚本执行方法（建议）</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1<span class="o">)</span> 编写人生第一个shell脚本
<span class="o">[</span>root@MissHou shell01]# <span class="nb">cat </span>first_shell.sh
<span class="c1">#!/bin/env bash</span>

<span class="c1"># 以下内容是对脚本的基本信息的描述</span>
<span class="c1"># Name: first_shell.sh</span>
<span class="c1"># Desc: num1</span>
<span class="c1"># Path: /shell01/first_shell.sh</span>
<span class="c1"># Usage:/shell01/first_shell.sh</span>
<span class="c1"># Update:2019-05-05</span>

<span class="nb">echo</span> <span class="s2">"hello world"</span>
<span class="nb">echo</span> <span class="s2">"hello world"</span>
<span class="nb">echo</span> <span class="s2">"hello world"</span>

2<span class="o">)</span> 脚本增加可执行权限
<span class="o">[</span>root@MissHou shell01]# <span class="nb">chmod</span> +x first_shell.sh

3<span class="o">)</span> 标准方式执行脚本
<span class="o">[</span>root@MissHou shell01]# <span class="nb">pwd</span>
/shell01
<span class="o">[</span>root@MissHou shell01]# /shell01/first_shell.sh
或者
<span class="o">[</span>root@MissHou shell01]# ./first_shell.sh

注意：标准执行方式脚本必须要有可执行权限。
</code></pre></div></div>

<ul>
  <li>非标准的执行方法（不建议）</li>
</ul>

<ol>
  <li>直接在命令行指定解释器执行</li>
</ol>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou shell01]# bash first_shell.sh
<span class="o">[</span>root@MissHou shell01]# sh first_shell.sh
<span class="o">[</span>root@MissHou shell01]# bash -x first_shell.sh
+ <span class="nb">echo</span> <span class="s1">'hello world'</span>
hello world
+ <span class="nb">echo</span> <span class="s1">'hello world'</span>
hello world
+ <span class="nb">echo</span> <span class="s1">'hello world'</span>
hello world
----------------
-x:一般用于排错，查看脚本的执行过程
-n:用来查看脚本的语法是否有问题
------------
</code></pre></div></div>

<ol>
  <li>使用<code class="highlighter-rouge">source</code>命令读取脚本文件,执行文件里的代码</li>
</ol>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou shell01]# <span class="nb">source </span>first_shell.sh
hello world
hello world
hello world
</code></pre></div></div>

<p><strong>小试牛刀：</strong>写一个木有灵魂的脚本，要求如下：</p>

<ol>
  <li>
    <p>删除/tmp/目录下的所有文件</p>
  </li>
  <li>
    <p>然后在/tmp目录里创建3个目录，分别是dir1~dir3</p>
  </li>
  <li>
    <p>拷贝/etc/hosts文件到刚创建的dir1目录里</p>
  </li>
  <li>
    <p>最后打印”报告首长，任务已于2019-05-05 10:10:10时间完成”内容</p>

    <p><code class="highlighter-rouge">echo "报告首长，任务已于$(date +'%F %T')"</code></p>
  </li>
</ol>

<h1 id="二变量的定义">二、变量的定义</h1>

<h2 id="1-变量是什么">1. 变量是什么？</h2>

<p>一句话概括：变量是用来临时保存数据的，该数据是可以变化的数据。</p>

<h2 id="2-什么时候需要定义变量">2. 什么时候需要定义变量？</h2>

<ul>
  <li>如果某个内容需要多次使用，并且在代码中<strong>重复出现</strong>，那么可以用变量代表该内容。这样在修改内容的时候，仅仅需要修改变量的值。</li>
  <li>在代码运作的过程中，可能会把某些命令的执行结果保存起来，后续代码需要使用这些结果，就可以直接使用这个变量。</li>
</ul>

<h2 id="3变量如何定义">3.变量如何定义？</h2>

<p><strong>变量名=变量值</strong></p>

<p>变量名：用来临时保存数据的</p>

<p>变量值：就是临时的可变化的数据</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>hello            定义变量A
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>            调用变量A，要给钱的，不是人民币是美元<span class="s2">"$"</span>
hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">A</span><span class="k">}</span>        还可以这样调用，不管你的姿势多优雅，总之要给钱
hello
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>world            因为是变量所以可以变，移情别恋是常事
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>            不管你是谁，只要调用就要给钱
world
<span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>A            不跟你玩了，取消变量
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>            从此，我单身了，你可以给我介绍任何人

</code></pre></div></div>

<h2 id="4-变量的定义规则">4. 变量的定义规则</h2>

<p>虽然可以给变量（变量名）赋予任何值；但是，对于变量名也是要求的！:unamused:</p>

<h3 id="-变量名区分大小写">㈠ 变量名区分大小写</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nv">a</span><span class="o">=</span>world
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>
hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$a</span>
world
</code></pre></div></div>

<h3 id="-变量名不能有特殊符号">㈡ 变量名不能有特殊符号</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="k">*</span><span class="nv">A</span><span class="o">=</span>hello
-bash: <span class="k">*</span><span class="nv">A</span><span class="o">=</span>hello: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# ?A<span class="o">=</span>hello
-bash: ?A<span class="o">=</span>hello: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# @A<span class="o">=</span>hello
-bash: @A<span class="o">=</span>hello: <span class="nb">command </span>not found

特别说明：对于有空格的字符串给变量赋值时，要用引号引起来
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>hello world
-bash: world: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span><span class="s2">"hello world"</span>
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span><span class="s1">'hello world'</span>
</code></pre></div></div>

<h3 id="-变量名不能以数字开头">㈢ 变量名不能以数字开头</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nv">1A</span><span class="o">=</span>hello
-bash: <span class="nv">1A</span><span class="o">=</span>hello: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# <span class="nv">A1</span><span class="o">=</span>hello
注意：不能以数字开头并不代表变量名中不能包含数字呦。
</code></pre></div></div>

<h3 id="-等号两边不能有任何空格">㈣ 等号两边不能有任何空格</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# A <span class="o">=</span>123
-bash: A: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span> 123
-bash: 123: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# A <span class="o">=</span> 123
-bash: A: <span class="nb">command </span>not found
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>123
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>
123
</code></pre></div></div>

<h3 id="-变量名尽量做到见名知意">㈤ 变量名尽量做到见名知意</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">NTP_IP</span><span class="o">=</span>10.1.1.1
<span class="nb">DIR</span><span class="o">=</span>/u01/app1
<span class="nv">TMP_FILE</span><span class="o">=</span>/var/log/1.log
...

说明：一般变量名使用大写（小写也可以），不要同一个脚本中变量全是a,b,c等不容易阅读
</code></pre></div></div>

<h2 id="5-变量的定义方式有哪些">5. 变量的定义方式有哪些？</h2>

<h3 id="-基本方式">㈠ 基本方式</h3>

<blockquote>
  <p>直接赋值给一个变量</p>
</blockquote>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>1234567
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>
1234567
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">A</span>:2:4<span class="k">}</span>        表示从A变量中第3个字符开始截取，截取4个字符
3456

说明：
<span class="nv">$变</span>量名 和 <span class="k">${</span><span class="p">变量名</span><span class="k">}</span>的异同
相同点：都可以调用变量
不同点：<span class="k">${</span><span class="p">变量名</span><span class="k">}</span>可以只截取变量的一部分，而<span class="nv">$变</span>量名不可以
</code></pre></div></div>

<h3 id="-命令执行结果赋值给变量">㈡ 命令执行结果赋值给变量</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nv">B</span><span class="o">=</span><span class="se">`d</span>ate +%F<span class="se">`</span>
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$B</span>
2019-04-16
<span class="o">[</span>root@MissHou ~]# <span class="nv">C</span><span class="o">=</span><span class="k">$(</span><span class="nb">uname</span> -r<span class="k">)</span>
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$C</span>
2.6.32-696.el6.x86_64
</code></pre></div></div>

<h3 id="-交互式定义变量read">㈢ 交互式定义变量(read)</h3>

<p><strong>目的：</strong>让用户自己给变量赋值，比较灵活。</p>

<p><strong>语法：</strong><code class="highlighter-rouge">read [选项] 变量名</code></p>

<p><strong>常见选项：</strong></p>

<table>
  <thead>
    <tr>
      <th>选项</th>
      <th>释义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-p</td>
      <td>定义提示用户的信息</td>
    </tr>
    <tr>
      <td>-n</td>
      <td>定义字符数（限制变量值的长度）</td>
    </tr>
    <tr>
      <td>-s</td>
      <td>不显示（不显示用户输入的内容）</td>
    </tr>
    <tr>
      <td>-t</td>
      <td>定义超时时间，默认单位为秒（限制用户输入变量值的超时时间）</td>
    </tr>
  </tbody>
</table>

<p><strong>举例说明：</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>用法1：用户自己定义变量值
<span class="o">[</span>root@MissHou ~]# <span class="nb">read </span>name
harry
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$name</span>
harry
<span class="o">[</span>root@MissHou ~]# <span class="nb">read</span> -p <span class="s2">"Input your name:"</span> name
Input your name:tom
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$name</span>
tom
</code></pre></div></div>

<p>用法2：变量值来自文件</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[root@MissHou ~]# cat 1.txt 
10.1.1.1 255.255.255.0

[root@MissHou ~]# read ip mask &lt; 1.txt 
[root@MissHou ~]# echo $ip
10.1.1.1
[root@MissHou ~]# echo $mask
255.255.255.0
</code></pre></div></div>

<h3 id="-定义有类型的变量declare">㈣ 定义有类型的变量(declare)</h3>

<p><strong>目的：</strong> 给变量做一些限制，固定变量的类型，比如：整型、只读</p>

<p><strong>用法：</strong><code class="highlighter-rouge">declare 选项 变量名=变量值</code></p>

<p><strong>常用选项：</strong></p>

<table>
  <thead>
    <tr>
      <th>选项</th>
      <th>释义</th>
      <th>举例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-i</td>
      <td>将变量看成整数</td>
      <td>declare -i A=123</td>
    </tr>
    <tr>
      <td>-r</td>
      <td>定义只读变量</td>
      <td>declare -r B=hello</td>
    </tr>
    <tr>
      <td>-a</td>
      <td>定义普通数组；查看普通数组</td>
      <td> </td>
    </tr>
    <tr>
      <td>-A</td>
      <td>定义关联数组；查看关联数组</td>
      <td> </td>
    </tr>
    <tr>
      <td>-x</td>
      <td>将变量通过环境导出</td>
      <td>declare -x AAA=123456 等于 export AAA=123456</td>
    </tr>
  </tbody>
</table>

<p><strong>举例说明：</strong></p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nb">declare</span> -i <span class="nv">A</span><span class="o">=</span>123
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>
123
<span class="o">[</span>root@MissHou ~]# <span class="nv">A</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$A</span>
0

<span class="o">[</span>root@MissHou ~]# <span class="nb">declare</span> -r <span class="nv">B</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$B</span>
hello
<span class="o">[</span>root@MissHou ~]# <span class="nv">B</span><span class="o">=</span>world
-bash: B: <span class="nb">readonly </span>variable
<span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>B
-bash: <span class="nb">unset</span>: B: cannot <span class="nb">unset</span>: <span class="nb">readonly </span>variable
</code></pre></div></div>

<h2 id="6-变量的分类">6. 变量的分类</h2>

<h3 id="-本地变量">㈠ 本地变量</h3>

<ul>
  <li><strong>本地变量</strong>：当前用户自定义的变量。当前进程中有效，其他进程及当前进程的子进程无效。</li>
</ul>

<h3 id="-环境变量">㈡ 环境变量</h3>

<ul>
  <li><strong>环境变量</strong>：当前进程有效，并且能够被<strong>子进程</strong>调用。
    <ul>
      <li><code class="highlighter-rouge">env</code>查看当前用户的环境变量</li>
      <li><code class="highlighter-rouge">set</code>查询当前用户的所有变量(临时变量与环境变量)</li>
      <li><code class="highlighter-rouge">export 变量名=变量值</code>    或者  <code class="highlighter-rouge">变量名=变量值；export 变量名</code></li>
    </ul>
  </li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nb">export </span><span class="nv">A</span><span class="o">=</span>hello        临时将一个本地变量（临时变量）变成环境变量
<span class="o">[</span>root@MissHou ~]# <span class="nb">env</span>|grep ^A
<span class="nv">A</span><span class="o">=</span>hello

永久生效：
vim /etc/profile 或者 ~/.bashrc
<span class="nb">export </span><span class="nv">A</span><span class="o">=</span>hello
或者
<span class="nv">A</span><span class="o">=</span>hello
<span class="nb">export </span>A

说明：系统中有一个变量PATH，环境变量
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/mysql/bin:<span class="nv">$PATH</span>
</code></pre></div></div>

<h3 id="-全局变量">㈢ 全局变量</h3>

<ul>
  <li>
    <p><strong>全局变量</strong>：全局所有的用户和程序都能调用，且继承，新建的用户也默认能调用.</p>
  </li>
  <li>
    <p><strong>解读相关配置文件</strong></p>
  </li>
</ul>

<table>
  <thead>
    <tr>
      <th>文件名</th>
      <th>说明</th>
      <th>备注</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$HOME/.bashrc</td>
      <td>当前用户的bash信息,用户登录时读取</td>
      <td>定义别名、umask、函数等</td>
    </tr>
    <tr>
      <td>$HOME/.bash_profile</td>
      <td>当前用户的环境变量，用户登录时读取</td>
      <td> </td>
    </tr>
    <tr>
      <td>$HOME/.bash_logout</td>
      <td>当前用户退出当前shell时最后读取</td>
      <td>定义用户退出时执行的程序等</td>
    </tr>
    <tr>
      <td>/etc/bashrc</td>
      <td>全局的bash信息，所有用户都生效</td>
      <td> </td>
    </tr>
    <tr>
      <td>/etc/profile</td>
      <td>全局环境变量信息</td>
      <td>系统和所有用户都生效</td>
    </tr>
    <tr>
      <td>$HOME/.bash_history</td>
      <td>用户的历史命令</td>
      <td>history -w   保存历史记录         history -c  清空历史记录</td>
    </tr>
  </tbody>
</table>

<p><strong>说明：</strong>以上文件修改后，都需要重新source让其生效或者退出重新登录。</p>

<ul>
  <li><strong>用户登录</strong>系统<strong>读取</strong>相关文件的顺序
    <ol>
      <li><code class="highlighter-rouge">/etc/profile</code></li>
      <li><code class="highlighter-rouge">$HOME/.bash_profile</code></li>
      <li><code class="highlighter-rouge">$HOME/.bashrc</code></li>
      <li><code class="highlighter-rouge">/etc/bashrc</code></li>
      <li><code class="highlighter-rouge">$HOME/.bash_logout</code></li>
    </ol>
  </li>
</ul>

<h3 id="-系统变量">㈣ 系统变量</h3>

<ul>
  <li><strong>系统变量(内置bash中变量)</strong> ： shell本身已经固定好了它的名字和作用.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>内置变量</th>
      <th>含义</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$?</td>
      <td>上一条命令执行后返回的状态；状态值为0表示执行正常，非0表示执行异常或错误</td>
    </tr>
    <tr>
      <td>$0</td>
      <td>当前执行的程序或脚本名</td>
    </tr>
    <tr>
      <td>$#</td>
      <td>脚本后面接的参数的个数</td>
    </tr>
    <tr>
      <td>$*</td>
      <td>脚本后面所有参数，参数当成一个整体输出，每一个变量参数之间以空格隔开</td>
    </tr>
    <tr>
      <td>$@</td>
      <td>脚本后面所有参数，参数是独立的，也是全部输出</td>
    </tr>
    <tr>
      <td>$1~$9</td>
      <td>脚本后面的位置参数，$1表示第1个位置参数，依次类推</td>
    </tr>
    <tr>
      <td>${10}~${n}</td>
      <td>扩展位置参数,第10个位置变量必须用{}大括号括起来(2位数字以上扩起来)</td>
    </tr>
    <tr>
      <td>$$</td>
      <td>当前所在进程的进程号，如<code class="highlighter-rouge">echo $$</code></td>
    </tr>
    <tr>
      <td>$！</td>
      <td>后台运行的最后一个进程号 (当前终端）</td>
    </tr>
    <tr>
      <td>!$</td>
      <td>调用最后一条命令历史中的参数</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>进一步了解位置参数<code class="highlighter-rouge">$1~${n}</code></li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/bin/bash</span>
<span class="c1">#了解shell内置变量中的位置参数含义</span>
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$0</span><span class="s2"> = </span><span class="nv">$0</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$# </span><span class="s2">= $#"</span>
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$*</span><span class="s2"> = </span><span class="nv">$*</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$@</span><span class="s2"> = </span><span class="nv">$@</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$1</span><span class="s2"> = </span><span class="nv">$1</span><span class="s2">"</span> 
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$2</span><span class="s2"> = </span><span class="nv">$2</span><span class="s2">"</span> 
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$3</span><span class="s2"> = </span><span class="nv">$3</span><span class="s2">"</span> 
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$11</span><span class="s2"> = </span><span class="k">${</span><span class="nv">11</span><span class="k">}</span><span class="s2">"</span> 
<span class="nb">echo</span> <span class="s2">"\</span><span class="nv">$12</span><span class="s2"> = </span><span class="k">${</span><span class="nv">12</span><span class="k">}</span><span class="s2">"</span> 
</code></pre></div></div>

<ul>
  <li>进一步了解$*和​$@的区别</li>
</ul>

<p><code class="highlighter-rouge">$*</code>：表示将变量看成一个整体
<code class="highlighter-rouge">$@</code>：表示变量是独立的</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/bin/bash</span>
<span class="k">for </span>i <span class="k">in</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">do
</span><span class="nb">echo</span> <span class="nv">$i</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"我是分割线="</span>

<span class="k">for </span>i <span class="k">in</span> <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span>
<span class="k">do
</span><span class="nb">echo</span> <span class="nv">$i</span>
<span class="k">done</span>

<span class="o">[</span>root@MissHou ~]# bash 3.sh a b c
a
b
c
我是分割线<span class="o">=</span>
a b c

</code></pre></div></div>

<h1 id="三简单四则运算">三、简单四则运算</h1>

<p>算术运算：默认情况下，shell就只能支持简单的整数运算</p>

<p>运算内容：加(+)、减(-)、乘(*)、除(/)、求余数（%）</p>

<h2 id="1-四则运算符号">1. 四则运算符号</h2>

<table>
  <thead>
    <tr>
      <th>表达式</th>
      <th>举例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>$((  ))</td>
      <td>echo $((1+1))</td>
    </tr>
    <tr>
      <td>$[ ]</td>
      <td>echo $[10-5]</td>
    </tr>
    <tr>
      <td>expr</td>
      <td>expr 10 / 5</td>
    </tr>
    <tr>
      <td>let</td>
      <td>n=1;let n+=1  等价于  let n=n+1</td>
    </tr>
  </tbody>
</table>

<h2 id="2了解i和i">2.了解i++和++i</h2>

<ul>
  <li>对变量的值的影响</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nv">i</span><span class="o">=</span>1
<span class="o">[</span>root@MissHou ~]# <span class="nb">let </span>i++
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$i</span>
2
<span class="o">[</span>root@MissHou ~]# <span class="nv">j</span><span class="o">=</span>1
<span class="o">[</span>root@MissHou ~]# <span class="nb">let</span> ++j
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$j</span>
2
</code></pre></div></div>

<ul>
  <li>对表达式的值的影响</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>i j
<span class="o">[</span>root@MissHou ~]# <span class="nv">i</span><span class="o">=</span>1;j<span class="o">=</span>1
<span class="o">[</span>root@MissHou ~]# <span class="nb">let </span><span class="nv">x</span><span class="o">=</span>i++         先赋值，再运算
<span class="o">[</span>root@MissHou ~]# <span class="nb">let </span><span class="nv">y</span><span class="o">=</span>++j         先运算，再赋值
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$i</span>
2
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$j</span>
2
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$x</span>
1
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="nv">$y</span>
2
</code></pre></div></div>

<h1 id="四扩展补充">四、扩展补充</h1>

<h2 id="1-数组定义">1. 数组定义</h2>

<h3 id="-数组分类">㈠ 数组分类</h3>

<ul>
  <li>普通数组：只能使用整数作为数组索引(元素的下标)</li>
  <li>关联数组：可以使用字符串作为数组索引(元素的下标)</li>
</ul>

<h3 id="-普通数组定义">㈡ 普通数组定义</h3>

<ul>
  <li>一次赋予一个值</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>数组名[索引下标]<span class="o">=</span>值
array[0]<span class="o">=</span>v1
array[1]<span class="o">=</span>v2
array[2]<span class="o">=</span>v3
array[3]<span class="o">=</span>v4
</code></pre></div></div>

<ul>
  <li>一次赋予多个值</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>数组名<span class="o">=(</span>值1 值2 值3 ...<span class="o">)</span>
<span class="nv">array</span><span class="o">=(</span>var1 var2 var3 var4<span class="o">)</span>

<span class="nv">array1</span><span class="o">=(</span><span class="se">`c</span>at /etc/passwd<span class="se">`)</span>            将文件中每一行赋值给array1数组
<span class="nv">array2</span><span class="o">=(</span><span class="se">`l</span>s /root<span class="se">`)</span>
<span class="nv">array3</span><span class="o">=(</span>harry amy jack <span class="s2">"Miss Hou"</span><span class="o">)</span>
<span class="nv">array4</span><span class="o">=(</span>1 2 3 4 <span class="s2">"hello world"</span> <span class="o">[</span>10]<span class="o">=</span>linux<span class="o">)</span>
</code></pre></div></div>

<h3 id="-数组的读取">㈢ 数组的读取</h3>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">${</span><span class="p">数组名[元素下标]</span><span class="k">}</span>

<span class="nb">echo</span> <span class="k">${</span><span class="nv">array</span><span class="p">[0]</span><span class="k">}</span>            获取数组里第一个元素
<span class="nb">echo</span> <span class="k">${</span><span class="nv">array</span><span class="p">[*]</span><span class="k">}</span>            获取数组里的所有元素
<span class="nb">echo</span> <span class="k">${#</span><span class="nv">array</span><span class="p">[*]</span><span class="k">}</span>            获取数组里所有元素个数
<span class="nb">echo</span> <span class="k">${</span><span class="p">!array[@]</span><span class="k">}</span>        获取数组元素的索引下标
<span class="nb">echo</span> <span class="k">${</span><span class="nv">array</span><span class="p">[@]</span>:1:2<span class="k">}</span>    访问指定的元素；1代表从下标为1的元素开始获取；2代表获取后面几个元素

查看普通数组信息：
<span class="o">[</span>root@MissHou ~]# <span class="nb">declare</span> -a
</code></pre></div></div>

<h3 id="-关联数组定义">㈣ 关联数组定义</h3>

<h4 id="首先声明关联数组">①首先声明关联数组</h4>
<p>declare -A asso_array1</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">declare</span> -A asso_array1
<span class="nb">declare</span> -A asso_array2
<span class="nb">declare</span> -A asso_array3
</code></pre></div></div>

<h4 id="-数组赋值">② 数组赋值</h4>

<ul>
  <li>一次赋一个值</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>数组名[索引or下标]<span class="o">=</span>变量值
<span class="c1"># asso_array1[linux]=one</span>
<span class="c1"># asso_array1[java]=two</span>
<span class="c1"># asso_array1[php]=three</span>
</code></pre></div></div>

<ul>
  <li>一次赋多个值</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># asso_array2=([name1]=harry [name2]=jack [name3]=amy [name4]="Miss Hou")</span>
</code></pre></div></div>

<ul>
  <li>查看关联数组</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># declare -A</span>
<span class="nb">declare</span> -A <span class="nv">asso_array1</span><span class="o">=</span><span class="s1">'([php]="three" [java]="two" [linux]="one" )'</span>
<span class="nb">declare</span> -A <span class="nv">asso_array2</span><span class="o">=</span><span class="s1">'([name3]="amy" [name2]="jack" [name1]="harry" [name4]="Miss Hou" )'</span>
</code></pre></div></div>

<ul>
  <li>获取关联数组值</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># echo ${asso_array1[linux]}</span>
one
<span class="c1"># echo ${asso_array1[php]}</span>
three
<span class="c1"># echo ${asso_array1[*]}</span>
three two one
<span class="c1"># echo ${!asso_array1[*]}</span>
php java linux
<span class="c1"># echo ${#asso_array1[*]}</span>
3
<span class="c1"># echo ${#asso_array2[*]}</span>
4
<span class="c1"># echo ${!asso_array2[*]}</span>
name3 name2 name1 name4
</code></pre></div></div>

<ul>
  <li>其他定义方式</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>root@MissHou shell05]# <span class="nb">declare</span> -A books
<span class="o">[</span>root@MissHou shell05]# <span class="nb">let </span>books[linux]++
<span class="o">[</span>root@MissHou shell05]# <span class="nb">declare</span> -A|grep books
<span class="nb">declare</span> -A <span class="nv">books</span><span class="o">=</span><span class="s1">'([linux]="1" )'</span>
<span class="o">[</span>root@MissHou shell05]# <span class="nb">let </span>books[linux]++
<span class="o">[</span>root@MissHou shell05]# <span class="nb">declare</span> -A|grep books
<span class="nb">declare</span> -A <span class="nv">books</span><span class="o">=</span><span class="s1">'([linux]="2" )'</span>
</code></pre></div></div>

<h2 id="2-其他变量定义">2. 其他变量定义</h2>

<ul>
  <li>取出一个目录下的目录和文件：<code class="highlighter-rouge">dirname</code>和 <code class="highlighter-rouge">basename</code></li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># A=/root/Desktop/shell/mem.txt </span>
<span class="c1"># echo $A</span>
/root/Desktop/shell/mem.txt
<span class="c1"># dirname $A   取出目录</span>
/root/Desktop/shell
<span class="c1"># basename $A  取出文件</span>
mem.txt
</code></pre></div></div>

<ul>
  <li>-变量”内容”的删除和替换</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>一个“%”代表从右往左删除
两个“%%”代表从右往左去掉最多
一个“#”代表从左往右去掉删除
两个“##”代表从左往右去掉最多

举例说明：
<span class="c1"># url=www.taobao.com</span>
<span class="c1"># echo ${#url}             获取变量的长度</span>
<span class="c1"># echo ${url#*.}</span>
<span class="c1"># echo ${url##*.}</span>
<span class="c1"># echo ${url%.*}</span>
<span class="c1"># echo ${url%%.*}</span>
</code></pre></div></div>

<ul>
  <li>以下了解，自己完成</li>
</ul>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>替换：/ 和 //
 1015  <span class="nb">echo</span> <span class="k">${</span><span class="nv">url</span><span class="p">/ao/AO</span><span class="k">}</span>  用AO代替ao（从左往右第一个）
 1017  <span class="nb">echo</span> <span class="k">${</span><span class="nv">url</span><span class="p">//ao/AO</span><span class="k">}</span>   贪婪替换（替代所有）
 
替代： - 和 :-  +和:+
 1019  <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">-123</span><span class="k">}</span>
 1020  <span class="nv">abc</span><span class="o">=</span>hello
 1021  <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">-444</span><span class="k">}</span>
 1022  <span class="nb">echo</span> <span class="nv">$abc</span>
 1024  <span class="nv">abc</span><span class="o">=</span>
 1025  <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">-222</span><span class="k">}</span>

<span class="k">${</span><span class="p">变量名-新的变量值</span><span class="k">}</span> 或者 <span class="k">${</span><span class="p">变量名=新的变量值</span><span class="k">}</span>
变量没有被赋值：会使用“新的变量值“ 替代
变量有被赋值（包括空值）： 不会被替代

 1062  <span class="nb">echo</span> <span class="k">${</span><span class="nv">ABC</span><span class="k">:-</span><span class="nv">123</span><span class="k">}</span>
 1063  <span class="nv">ABC</span><span class="o">=</span>HELLO
 1064  <span class="nb">echo</span> <span class="k">${</span><span class="nv">ABC</span><span class="k">:-</span><span class="nv">123</span><span class="k">}</span>
 1065  <span class="nv">ABC</span><span class="o">=</span>
 1066  <span class="nb">echo</span> <span class="k">${</span><span class="nv">ABC</span><span class="k">:-</span><span class="nv">123</span><span class="k">}</span>

<span class="k">${</span><span class="p">变量名</span><span class="k">:-</span><span class="p">新的变量值</span><span class="k">}</span> 或者 <span class="k">${</span><span class="p">变量名</span>:<span class="p">=新的变量值</span><span class="k">}</span>
变量没有被赋值或者赋空值：会使用“新的变量值“ 替代
变量有被赋值： 不会被替代

 1116  <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">=123</span><span class="k">}</span>
 1118  <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:<span class="p">=123</span><span class="k">}</span>

<span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>abc
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:+123<span class="k">}</span>

<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:+123<span class="k">}</span>
123
<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:+123<span class="k">}</span>

<span class="k">${</span><span class="p">变量名+新的变量值</span><span class="k">}</span>
变量没有被赋值或者赋空值：不会使用“新的变量值“ 替代
变量有被赋值： 会被替代
<span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>abc
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">+123</span><span class="k">}</span>

<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">+123</span><span class="k">}</span>
123
<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">+123</span><span class="k">}</span>
123
<span class="k">${</span><span class="p">变量名</span>:+新的变量值<span class="k">}</span>
变量没有被赋值：不会使用“新的变量值“ 替代
变量有被赋值（包括空值）： 会被替代

<span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>abc
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">?123</span><span class="k">}</span>
-bash: abc: 123

<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">?123</span><span class="k">}</span>
hello
<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span><span class="p">?123</span><span class="k">}</span>

<span class="k">${</span><span class="p">变量名?新的变量值</span><span class="k">}</span>
变量没有被赋值:提示错误信息
变量被赋值（包括空值）：不会使用“新的变量值“ 替代

<span class="o">[</span>root@MissHou ~]# <span class="nb">unset </span>abc
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:?123<span class="k">}</span>
-bash: abc: 123
<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>hello
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:?123<span class="k">}</span>
hello
<span class="o">[</span>root@MissHou ~]# <span class="nv">abc</span><span class="o">=</span>
<span class="o">[</span>root@MissHou ~]# <span class="nb">echo</span> <span class="k">${</span><span class="nv">abc</span>:?123<span class="k">}</span>
-bash: abc: 123

<span class="k">${</span><span class="p">变量名</span>:?新的变量值<span class="k">}</span>
变量没有被赋值或者赋空值时:提示错误信息
变量被赋值：不会使用“新的变量值“ 替代

说明：?主要是当变量没有赋值提示错误信息的，没有赋值功能
</code></pre></div></div>


  </section>

</article>

<section>

            <div class="content-play">
              <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏一个呗</a></p>
              <div class="hide_box-play"></div>
              <div class="shang_box-play">
                <a class="shang_close-play" href="javascript:void(0)" onclick="dashangToggle()" title="关闭"><img src="/images/payimg/close.jpg" alt="取消" /></a>
                <div class="shang_tit-play">
                  <p>感谢您的支持，我会继续努力的!</p>
                </div>
                <div class="shang_payimg">
                    <img src="/images/payimg/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
                </div>
              <div class="shang_payimg">    
                    <img src="/images/payimg/weipayimg.jpg" alt="扫码支持" title="扫一扫" />
                </div>
                <div class="pay_explain">扫码打赏，你说多少就多少</div>
                <div class="shang_payselect">
                  <div class="pay_item checked" data-id="alipay">
                    <span class="pay_logo"><img src="/images/payimg/alipay.jpg" alt="支付宝" /></span>
                  </div>
                  <div class="pay_item" data-id="weipay">
                    <span class="pay_logo"><img src="/images/payimg/wechat.jpg" alt="微信" /></span>
                  </div>
                </div>
                <div class="shang_info-play">
                  <p>打开<span id="shang_pay_txt">支付宝</span>扫一扫，即可进行扫码打赏哦</p>
                </div>
              </div>
            </div>
            <script type="text/javascript">
            function dashangToggle(){
              $(".hide_box-play").fadeToggle();
              $(".shang_box-play").fadeToggle();
            }
            </script>

            <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>

            <style type="text/css">
              .content-play{width:80%;margin-top: 20px;margin-bottom: 10px;height:40px;}
              .hide_box-play{z-index:999;filter:alpha(opacity=50);background:#666;opacity: 0.5;-moz-opacity: 0.5;left:0;top:0;height:99%;width:100%;position:fixed;display:none;}
              .shang_box-play{width:540px;height:540px;padding:10px;background-color:#fff;border-radius:10px;position:fixed;z-index:1000;left:50%;top:50%;margin-left:-280px;margin-top:-280px;border:1px dotted #dedede;display:none;}
              .shang_box-play img{border:none;border-width:0;}
              .dashang{display:block;width:100px;margin:5px auto;height:25px;line-height:25px;padding:10px;background-color:#E74851;color:#fff;text-align:center;text-decoration:none;border-radius:10px;font-weight:bold;font-size:16px;transition: all 0.3s;}
              .dashang:hover{opacity:0.8;padding:15px;font-size:18px;}
              .shang_close-play{float:right;display:inline-block;
                margin-right: 10px;margin-top: 20px;
              }
              .shang_logo{display:block;text-align:center;margin:20px auto;}
              .shang_tit-play{width: 100%;height: 75px;text-align: center;line-height: 66px;color: #a3a3a3;font-size: 16px;background: url('/images/payimg/cy-reward-title-bg.jpg');font-family: 'Microsoft YaHei';margin-top: 7px;margin-right:2px;}
              .shang_tit-play p{color:#a3a3a3;text-align:center;font-size:16px;}
              .shang_payimg{width:140px;padding:10px;padding-left: 80px; /*border:6px solid #EA5F00;**/margin:0 auto;border-radius:3px;height:140px;display:inline-block;}
              .shang_payimg img{display:inline-block;margin-right:10px;float:left;text-align:center;width:140px;height:140px; }
              .pay_explain{text-align:center;margin:10px auto;font-size:12px;color:#545454;}
              .shang_payselect{text-align:center;margin:0 auto;margin-top:40px;cursor:pointer;height:60px;width:500px;margin-left:110px;}
              .shang_payselect .pay_item{display:inline-block;margin-right:140px;float:left;}
              .shang_info-play{clear:both;}
              .shang_info-play p,.shang_info-play a{color:#C3C3C3;text-align:center;font-size:12px;text-decoration:none;line-height:2em;}
            </style>

       <ul class="pager">
        
        <li class="previous">
            <a href="/2018/04/01_SHELL/" data-toggle="tooltip" data-placement="top" title="01_SHELL编程前奏_小工具">上一篇：  <span>01_SHELL编程前奏_小工具</span>
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2018/04/03_SHELL/" data-toggle="tooltip" data-placement="top" title="03_SHELL编程之条件判断和流程控制">下一篇：  <span>03_SHELL编程之条件判断和流程控制</span>
            </a>
        </li>
        
    </ul>
</section>

<section class="post-comments">

  

      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMDUwNi83MDYw">
      <script type="text/javascript">
         (function(d, s) {
             var j, e = d.getElementsByTagName(s)[0];

             if (typeof LivereTower === 'function') { return; }
             j = d.createElement(s);
             j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
             j.async = true;
             e.parentNode.insertBefore(j, e);
         })(document, 'script');
      </script>
      <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
      </div>

  

</section>


            <section class="footer">
    <footer>
        <div class = "footer_div">  
        <nav class="cover-navigation navigation--social">
          <ul class="navigation">

          
          <!-- Github -->
          <li class="navigation__item_social">
            <a href="https://github.com/lijingbiao" title="@lijingbiao 的 Github" target="_blank">
              <div class="footer-social-icon" style="background:url(/images/github.png);"></div>
            </a>
          </li>
          

          

          

          
          <!-- Zhihu -->
          <li class="navigation__item_social">
            <a href="https://www.jianshu.com/u/e66c74545d7e" title="@e66c74545d7e" target="_blank">
              <div class="footer-social-icon" style="background:url(/images/jianshu.png);"></div>
            </a>
          </li>

          

          

          
          


          
          <!-- Email -->
          <li class="navigation__item_social">
            <a href="mailto:694292399@qq.com" title="Contact me">
              <div class="footer-social-icon" style="background:url(/images/email.png);"></div>
            </a>
          </li>
          
          
          <!-- RSS -->
          <li class="navigation__item_social">
            <a href="/feed.xml" rel="author" title="RSS" target="_blank">
              <div class="footer-social-icon" style="background:url(/images/rss.png);"></div>
              <span class="label">RSS</span>
            </a>
          </li>

          </ul>
        </nav>

        </div>

        <div class = "footer_div">  
           <p class="copyright text-muted">
            Copyright &copy; LiJingBiao 2021  |
            <iframe
                style="margin-left: 2px; margin-bottom:-5px;"
                frameborder="0" scrolling="0" width="91px" height="20px"
                src="https://ghbtns.com/github-btn.html?user=lijingbiao&repo=lijingbiao.github.io&type=star&count=true" >
            </iframe>
            </p>
        	<div align="right">
    			<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

          <!-- 访问统计 -->
          <span id="busuanzi_container_site_pv">
            本站总访问量
            <span id="busuanzi_value_site_pv"></span>次
          </span>

        </div>
        <div>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/js/main.js"></script>

<script type="text/javascript" src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



    
  </body>

</html>
